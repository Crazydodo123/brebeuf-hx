var rAF,cAF;window.addEventListener=window.addEventListener||window.attachEvent,window.removeEventListener=window.removeEventListener||window.detachEvent,XMLHttpRequest.prototype.sendAsBinary||(XMLHttpRequest.prototype.sendAsBinary=function(sData){for(var nBytes=sData.length,ui8Data=new Uint8Array(nBytes),nIdx=0;nIdx<nBytes;nIdx++)ui8Data[nIdx]=255&sData.charCodeAt(nIdx);this.send(ui8Data)}),"function"!=typeof Object.assign&&(Object.assign=function(target,varArgs){"use strict";if(null==target)throw new TypeError("Cannot convert undefined or null to object");for(var to=Object(target),index=1;index<arguments.length;index++){var nextSource=arguments[index];if(null!=nextSource)for(var nextKey in nextSource)Object.prototype.hasOwnProperty.call(nextSource,nextKey)&&(to[nextKey]=nextSource[nextKey])}return to}),Date.now||(Date.now=function(){return(new Date).getTime()});var tabState={};function initChangeStates(cSelects){if(0!==cSelects.length)for(var i=0;i<cSelects.length;i++){var cs=cSelects[i];changeStates(cs.value,cs.form)}}function changeStates(value,form){try{var p=(f=form||document).querySelector(".province-select"),s=f.querySelector(".state-select"),o=f.querySelector(".other-province-select"),req=-1===f.querySelector(".real-province").className.indexOf("required")?"":" required",reset=function(el){""!==req&&(el.className=el.className.replace(req,"")),el.style.display="none",el.tabIndex=-1},change=function(el){el.removeAttribute("tabindex"),el.style.display="block",el.className+=req,el.onchange()};switch(reset(p),reset(s),reset(o),value.toUpperCase()){case"CA":case"CAN":change(p);break;case"US":case"USA":change(s);break;default:change(o)}}catch(ex){try{p=(f=form||document).querySelector(".province-select"),s=f.querySelector(".state-select"),o=f.querySelector(".other-province-select");var f,v=value.toUpperCase();p.className=p.className.replace("required","").trim(),s.className=s.className.replace("required","").trim(),o.className=o.className.replace("required","").trim(),"CA"===v||"CAN"===v?(p.style.display="block",s.style.display="none",o.style.display="none",p.className+=" required",p.onchange()):"US"===v||"USA"===v?(p.style.display="none",s.style.display="block",o.style.display="none",s.className+=" required",s.onchange()):(p.style.display="none",s.style.display="none",o.style.display="block",o.className+=" required",o.onchange())}catch(noSelects){}}}function setRealProvince(select){select.parentElement.parentElement.querySelector(".real-province").value=select.value}function canadaPC(code){return/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ]( )?\d[ABCEGHJKLMNPRSTVWXYZ]\d$/i.test(code)}function usaZIP(code){return/^\d{5}([ \-]\d{4})?$/.test(code)}function decodeElements(els){var str="",i=0;if(els.length)for(;i<els.length;i++){var el=els[i];str=decodeEntities(el.innerHTML),el.innerHTML=str}else str=decodeEntities(els.innerHTML),els.innerHTML=str}function decodeEntities(str){var ta=document.createElement("textarea");return ta.innerHTML=str,ta.value}function numLock(e){var k=e.keyCode||e.which;[8,9,13,27,35,36,37,38,39,40,46,110,144].indexOf(k)>-1||[65,67,86,88,89,90].indexOf(k)>-1&&(e.ctrlKey||e.metaKey)||(e.shiftKey||k<48||k>57)&&(k<96||k>105)&&e.preventDefault()}function setMoney($,round){try{var lang=document.documentElement.lang,dec=round?0:2,res=(isNaN($)?parseFloat($.replace(",",".")):$).toFixed(dec).toString();return"en"===lang?"$"+res:res.replace(".",",")+"$"}catch(err){return $}}function formatMoney($,round){return setMoney($,round)}function getTaxes(province,subtotal){var t={AB:{1:.05},BC:{1:.05},MB:{1:.05},NB:{1:.15},NL:{1:.15},NT:{1:.05},NS:{1:.15},NU:{1:.05},ON:{1:.13},QC:{1:.05,2:.09975},PE:{1:.15},SK:{1:.05},YT:{1:.05}},t1=t[province][1]*subtotal.replace(",","."),taxes=[t1];if(void 0!==t[province][2]){var t2=parseInt(subtotal+t1)*t[province][2];taxes.push(t2)}return taxes}function updateLabel(label,val,lang,callback,noload){var ap=actionPath||"/action/";noload||ajaxBlackout(!0),$.ajax({url:ap+"addSiteLabel",method:"post",type:"post",data:{lang:lang,key:label,value:val||"`````"},cache:!1,success:function(response){noload||ajaxBlackout(!1),"function"==typeof callback&&callback(response)}})}function updateLabelLangs(k,v,langs,f,noload){var a="string"==typeof langs?langs.split(","):langs,successCd=a.length,_complete=function(){if(--successCd<=0&&(ajaxBlackout(!1),f))try{f()}catch(ex){}};noload||ajaxBlackout(!0);for(var i=0;i<a.length;i++)updateLabel(k,v,a[i],_complete,noload)}function updateMultiLabels(o,lang,f,noload){var k,c=0,l=0,timeout=120;for(k in o)updateLabel(k,o[k],lang,(function(){c++}),noload),l++;(function chk(){timeout-=.05,c<l?timeout>0&&setTimeout(chk,50):f&&f()})()}function getDataSet(el){var map={};if(el.dataset)map=el.dataset;else for(var as=el.attributes,tuc=function(x){return x.substr(1).toUpperCase()},i=0;i<as.length;i++){var a=as[i],m=a.name.match(/^data-(.+)/);m&&(map[m[1].replace(/-([a-z])/gi,tuc)]=a.value)}return map}function setDataSet(el,key,val){if(el.dataset)el.dataset[key]=val;else{var att="data-"+key.replace(/[A-Z]/g,(function(x){return"-"+x.toLowerCase()}));el.setAttribute(att,val)}}function pickerAddListener(popup){$(".file-preview-picker-popup-accept-btn",popup).click(filePreviewPickerSumbit),$(".file-preview-picker-input",popup).keyup(filePreviewPickerSearch),$(".file-preview-picker-item.folder",popup).click(filePreviewPickerDirectoryOpen),$(".file-preview-picker-directory-back",popup).click(filePreviewPickerDirectoryClose),$(".picker-popup-close-btn",popup).click(filePreviewPickerClosePopup)}function pickerOpenPopup(){var popupToOpen,popupId=$(this).attr("data-popup-id");popupToOpen=$('.picker-popup[data-popup-id="'+popupId+'"]').eq(0);var mainDirectory=$(".file-preview-picker-main-directory",popupToOpen);$("html").addClass("no-scroll"),popupToOpen.css("display","flex").fadeIn(300),setTimeout((function(){popupToOpen.hasClass("init")||("true"===mainDirectory.attr("data-use-ajax")&&popupToOpen.hasClass("file-preview-picker-popup")&&filePickerLoadDirectory(mainDirectory.attr("data-directory"),mainDirectory,!0),$(".file-preview-picker-main-directory > .file-preview-picker-directory",popupToOpen).add(mainDirectory).each((function(){var t=$(this);t.css("margin-right",t[0].clientWidth-t[0].offsetWidth+"px")})),$(".gen-list-popup-item-textarea",popupToOpen).each((function(){$(this).trigger("focus click")})),popupToOpen.addClass("init"))}),1),popupToOpen.hasClass("sort-ascending")&&popupToOpen.find("> .picker-popup-window > .picker-popup-content > .popup-default-content-ctn > .gen-list-popup-list").each((function(){var list=$(this);$(".gen-list-popup-item",list).sort((function(a,b){return $(".gen-list-popup-item-header-title",$(a)).text().toUpperCase().localeCompare($(".gen-list-popup-item-header-title",$(b)).text().toUpperCase())})).appendTo(list)}))}function filePickerLoadDirectory(directory,parent,isInitial){var popup=parent.closest(".file-preview-picker-popup"),fileItemClone=$(".file-preview-picker-item-big.clone",popup).clone().removeClass("clone"),directoryClone=$(".file-preview-picker-directory.clone",popup).clone().removeClass("clone"),btn=parent.closest(".file-preview-picker-popup").find(".file-preview-picker-popup-accept-btn"),value="object"==typeof btn.data("value")&&void 0!==btn.data("value")[0]?btn.data("value")[0].fullUrl:btn.data("value");if(!parent.hasClass("items-loaded")){if(isInitial&&parent.children(":not(.file-preview-picker-directory-back-ctn)").remove(),"object"==typeof btn.data("value")&&void 0!==btn.data("value")[0]){var finalValue=[];value.split(",").forEach((function(item){if(item.trim().length){var urlSplit=item.split("/"),fullUrl=0===item.indexOf("/static/uploaded/Files")?item:"",itemName=0===item.indexOf("/static/uploaded/Files")?urlSplit[urlSplit.length-1]:item;finalValue.push({fullUrl:fullUrl,value:itemName})}})),btn.data("value",finalValue),value=finalValue,parent.addClass("directory-loading")}$.ajax({url:"/action/ajaxMediaManager?directory="+encodeURIComponent(directory),type:"get",success:function(data){var json=JSON.parse(data),extensions=btn.attr("data-extensions").toLowerCase(),dirArray=[],itemArray=[];json.content.forEach((function(item,index,arr){"directory"===item.type?dirArray.push(item):itemArray.push(item)})),dirArray.sort((function(a,b){return a.name.toUpperCase().localeCompare(b.name.toUpperCase())})),itemArray.sort((function(a,b){return a.name.toUpperCase().localeCompare(b.name.toUpperCase())})),json.content=dirArray.concat(itemArray),json.content.forEach((function(item,index,arr){setTimeout((function(){filePickerUpdateParentContent(item,parent,json,extensions,fileItemClone,directoryClone,isInitial,value)}),1)})),$(".file-preview-picker-directory",parent).each((function(){var t=$(this);t.css("margin-right",t[0].clientWidth-t[0].offsetWidth+"px")})),initFilePickerPopop($(".file-preview-picker-popup-accept-btn",popup)),parent.addClass("items-loaded")},complete:function(){parent.removeClass("directory-loading")}})}}function filePickerUpdateParentContent(item,parent,json,extensions,fileItemClone,directoryClone,isInitial,predefinedValue){var path,itemClone=fileItemClone.clone(),previewItem=$(".file-preview-picker-item",itemClone),value=$(".file-preview-picker-item-value-ctn",itemClone),file=$(".file.clone",itemClone),folder=$(".folder.clone",itemClone),img=$(".image-alt.clone",itemClone),url="/static/uploaded/Files",fileFound=!1,popup=parent.closest(".file-preview-picker-popup");if(value.html(item.name),json.currentDirectory=json.currentDirectory+("/"===json.currentDirectory[json.currentDirectory.length-1]?"":"/"),path=json.currentDirectory+value.text(),url+=path,"directory"===item.type){var dirClone=directoryClone.clone(),innerId=path.replace(/\//g,"-"),pathsArray=[],pathsString="",isSeleted=!1;if("object"==typeof predefinedValue)for(var key in pathsString=[],predefinedValue)pathsString.push(predefinedValue[key].fullUrl);else pathsString=predefinedValue.split(",");console.log("OG: "+predefinedValue);for(var q=0;q<pathsString.length;q++)for(var currPathString=pathsString[q].substring("/static/uploaded/Files".length).split("/");currPathString.length>1;)""!==currPathString[0]?(currPathString.pop(),pathsArray.push("/"+currPathString.join("/"))):currPathString.shift();"object"==typeof predefinedValue&&0!==Object.keys(predefinedValue).length&&predefinedValue.reduce((function(bool,current){return bool||-1!=current.fullUrl.indexOf(path)}),!1),dirClone.attr("data-id",innerId).attr("data-directory",path).css("z-index",10),dirClone.find(".file-preview-picker-directory-back").attr("data-id",innerId).click(filePreviewPickerDirectoryClose),parent.append(dirClone),file.remove(),img.remove(),folder.children().unwrap(),itemClone.children().first().addClass("folder").attr("data-directory-to-open",path).attr("data-directory-parent",json.currentDirectory).attr("data-id",innerId).click(filePreviewPickerDirectoryOpen);for(var p=pathsArray.length-1;p>=0;p--)if(pathsArray[p]===previewItem.attr("data-directory-to-open")){isSeleted=!0;break}isSeleted&&itemClone.children().first().addClass("selected")}else{if("object"==typeof predefinedValue&&0!==Object.keys(predefinedValue).length)fileFound=predefinedValue.reduce((function(bool,current){return bool||current.fullUrl===url||-1!=url.indexOf(current.value)}),!1);else if("string"==typeof predefinedValue)for(var predefinedValueArray=predefinedValue.split(","),i=0;i<predefinedValueArray.length;i++)if(predefinedValueArray[i]===url){fileFound=!0;break}if(0!==$(".file-preview-picker-popup-selection-list",popup).length&&0===$('.file-preview-picker-popup-selection-item[data-url="'+url+'"]',popup).length&&(fileFound=!1),/(image)|(svg)/.test(item.ext)||"svg"===item.name.substring(item.name.lastIndexOf(".")+1)){var imgAlt=img.find("img");file.remove(),folder.remove(),imgAlt.attr("src",url),imgAlt.attr("alt",imgAlt.attr("alt")+value.text()),img.children().unwrap()}else img.remove(),folder.remove(),file.children().unwrap()}itemClone.children().first().attr("data-file-url","/static/uploaded/Files"+json.currentDirectory).attr("data-hashname",item.nameHash).attr("data-value",value.text()).attr("data-file-fullurl","/static/uploaded/Files"+json.currentDirectory+value.text()),("directory"===item.type||!extensions.trim().length||extensions.indexOf(item.name.split(".")[item.name.split(".").length-1].toLowerCase())>-1)&&parent.append(itemClone),fileFound&&itemClone.children().first().trigger("click")}function filePickerUnloadDirectory(directory){directory.find(".file-preview-picker-directory, .file-preview-picker-item-big").remove()}function pickerClosePopup(callback){var popup=$(this).closest(".picker-popup");"true"!==popup.attr("data-is-from-gen-list")&&$("html").removeClass("no-scroll"),popup.fadeOut(300,(function(){"function"==typeof callback&&callback()}))}function pickerChangeTab(){var t=$(this),id=t.attr("data-file-picker-tab"),popup=t.closest(".picker-popup");t.hasClass("selected")||($(".file-preview-picker-tab-btn, .file-preview-picker-tab-ctn",popup).removeClass("selected"),$('.file-preview-picker-tab-btn[data-file-picker-tab="'+id+'"], .file-preview-picker-tab-ctn[data-file-picker-tab="'+id+'"]',popup).addClass("selected"))}function pickerSelectionItemDel(){var item=$(this).closest(".file-preview-picker-popup-selection-item"),url=item.attr("data-url"),popup=item.closest(".file-preview-picker-popup");0!==$('.file-preview-picker-item[data-file-fullurl="'+url+'"]').length?$('.file-preview-picker-item[data-file-fullurl="'+url+'"]').trigger("click"):(item.remove(),filePreviewCheckDetailTabCounter(popup),pickerCheckIfUnloadedFilterHasUnselectedItem(popup))}function pickerCheckIfUnloadedFilterHasUnselectedItem(popup){$(".file-preview-picker-item.selected.folder",popup).filter((function(){return!$('.file-preview-picker-directory[data-id="'+$(this).attr("data-id")+'"]',popup).hasClass("items-loaded")})).each((function(){var t=$(this),directory=t.attr("data-file-fullurl"),hasChild=!1;$(".file-preview-picker-popup-selection-item:not(.clone)",popup).each((function(){$(this).attr("data-url").substring(0,$(this).attr("data-url").lastIndexOf("/"))===directory&&(hasChild=!0)})),hasChild?t.addClass("selected"):t.removeClass("selected")}))}function initPickerSelectionItemsSortable(){0!==$(".file-preview-picker-popup-selection-list").length&&$(".file-preview-picker-popup-selection-list").sortable({handle:".file-preview-picker-popup-selection-handle",helper:fixHelper})}function genListToggleItem(){var ctn=$(this).closest(".gen-list-popup-item");ctn.hasClass("open")?($("> .gen-list-popup-item-content-ctn",ctn).slideUp(200),ctn.removeClass("open")):(ctn.addClass("open"),$("> .gen-list-popup-item-content-ctn",ctn).slideDown(200))}function genListToggleGencom(){var ctn=$(this).closest(".gen-list-popup-admin-gencom-ctn");ctn.hasClass("open")?$(".gen-list-popup-admin-gencom-content-ctn",ctn).slideUp(200,(function(){ctn.removeClass("open")})):$(".gen-list-popup-admin-gencom-content-ctn",ctn).slideDown(200,(function(){ctn.addClass("open")}))}function genListAddItem(){var t=$(this),popup=t.closest(".picker-popup"),content=(popup.attr("data-label-id"),$("> .picker-popup-window > .picker-popup-content > .popup-default-content-ctn",popup)),list=$("> .gen-list-popup-list",content),clone=$(".gen-list-popup-item",list).eq(0).clone(),newId=createUniqueCharId(),order=$("> .gen-list-popup-item:not(.clone.disabled)",list).length,limit=t.attr("data-limit");order>=limit||(order+1>=limit&&t.addClass("disabled"),clone.removeClass("open clone disabled"),$(".gen-list-popup-item-content-ctn",clone).slideUp(0),clone.attr("data-id-temp",newId),clone.removeAttr("style data-id data-item-id"),clone.attr("data-order",order),$(".gen-list-popup-item-header-title",clone).html('Item <span class="gen-list-popup-item-header-title-pos">'+(order+1)+"</span>").removeAttr("data-has-field-value"),$(".gen-list-popup-item-text",clone).each((function(){""!==$(this).attr("data-default-value")?$(this).val($(this).attr("data-default-value")):$(this).val("")})),$(".gen-list-popup-item-bigtext",clone).each((function(){""!==$(this).attr("data-default-value")?$(this).val($(this).attr("data-default-value")):$(this).val("")})),$(".gen-list-popup-item-select",clone).val($(".gen-list-popup-item-select option",clone).eq(0).val()),$(".gen-list-popup-file-picker-value",clone).html(""),$(".alert-submit-form-gen-list",clone).attr("data-gen-listception-item-id",""),$(".mce-tinymce",clone).remove(),$(".gen-list-popup-item-textarea",clone).removeAttr("id").removeAttr("style").removeAttr("aria-hidden").html(""),$(".picele",clone).html(""),$(".gen-list-popup-item-content-item",clone).attr("data-order",order),$(".alert-submit-form-gen-list.hidden",clone).removeClass("hidden"),$(".gen-list-popup-gen-list-btn",clone).hide(),$('.gen-list-popup-item-content-item[data-type="icon"]',clone).each((function(i){var t=$(this),newIconPickerKey="gen-list-popup-icon-picker-"+newId+"-"+i,assocPopup=$(".foxoneWindow.icon-picker",clone).eq(i);$(".stool-icopick-mod",t).attr("data-key",newIconPickerKey),$(".stool-icopick-mod",t).attr("data-window-id",newIconPickerKey),assocPopup.attr("id",newIconPickerKey),$('[onclick^="closeWindow"]',clone).attr("onclick","closeWindow('"+newIconPickerKey+"')")})),$('.gen-list-popup-item-content-item[data-type="file"]',clone).each((function(i){var t=$(this),newLabelId="gen-list-popup-file-picker-"+newId+"-"+i,assocPopup=$(".gen-list-file-popup",clone).eq(i),currItemId=t.attr("data-id");$(".picker-popup-button",t).attr("data-label-id",newLabelId),$(".picker-popup-button",t).attr("data-popup-id",newLabelId),$(".picker-popup-button",t).click(pickerOpenPopup),assocPopup.attr("data-label-id",newLabelId),assocPopup.attr("data-popup-id",newLabelId),$(".gen-list-popup-file-picker-value",t).attr("data-id",currItemId),$(".file-preview-picker-popup-accept-btn",assocPopup).attr("data-element-to-update",'.gen-list-popup-item[data-id-temp="'+newId+'"] .gen-list-popup-file-picker-value[data-id="'+currItemId+'"]'),$(".file-preview-picker-item",assocPopup).removeClass("selected"),pickerAddListener(assocPopup)})),$(".gen-list-popup-item-select-selected-item:not(.clone)",clone).remove(),$(".gen-list-popup-item-select option",clone).show(),$(".gen-list-popup-item-select",clone).each((function(){"true"===$(this).closest(".gen-list-popup-item-select-ctn").attr("data-multi")&&$(this).on("change",genListPopupItemSelectChange)})),$(".gen-list-popup-item-friendly-url-input",clone).val(""),$(".gen-list-popup-item-header-friendly",clone).html(""),$(".color-picker-color-picker-ctn",clone).attr("data-current-color","#ff0000"),$(".edit-link-tab",clone).each((function(){$(this).removeAttr("checked"),$(this).attr("name","type-"+newId+"-"+$(this).closest(".gen-list-popup-item-content-item").attr("data-id"))})),$(".radioLabelContainer:first-child .edit-link-tab",clone).trigger("click"),$('select[name="page"], select[name="internal"], select[name="external"], select[name="target"]',clone).val(""),$('select[name="page"] option, select[name="internal"] option, select[name="external"] option, select[name="target"] option',clone).removeAttr("selected"),$('input[name="query"], input[name="event"], input[name="text"]',clone).val(""),list.append(clone),$(".gen-com-select .gen-list-popup-item-select",clone).trigger("change"),CPclearCanvasListeners(),CPsetupHueCanvas(),CPsetupCanvasListeners(),CPsetColor(),$('.gen-list-popup .gen-list-mce:not([id^="mce_"])').each((function(){genlistTinyMCE(this,$(this).closest(".gen-list-popup-item").attr("data-id-temp"))})))}function genlistTinyMCE(selector,itemId){if($("body").hasClass("is-logged-in")||$(selector).length){var overwritePluginSettings=$(selector).closest(".gen-list-popup-list").attr("data-tinymce-plugin-setting"),pluginSettings=void 0!==overwritePluginSettings?overwritePluginSettings:"paste link textcolor lists",overwriteToobarSettings=$(selector).closest(".gen-list-popup-list").attr("data-tinymce-toolbar-setting"),settings={menubar:!1,inline:!0,plugins:pluginSettings,toolbar:void 0!==overwriteToobarSettings?overwriteToobarSettings:"formatselect | bold italic strikethrough forecolor | alignleft aligncenter alignright alignjustify  | numlist bullist | link | removeformat",urlconverter_callback:"customURLConverter",relative_urls:!0,remove_script_host:!0,entity_encoding:"raw",paste_as_text:!0,theme_advanced_blockformats:"p,h1,h2,h3,h4,h5,h6,blockquote"};$(selector).each((function(i){var t=$(this).addClass("gen-list-mce-"+itemId);if(t.prev().addClass("gen-list-mce-toolbar-"+itemId),10!=document.firstChild.nodeType)for(var brs=$("br",t),iBr=brs.length-1;iBr>=0;iBr--)iBr%2==1&&brs.eq(iBr).remove();settings.selector=".gen-list-mce-"+itemId,settings.fixed_toolbar_container=".gen-list-mce-toolbar-"+itemId,genlistTinyMCEInit(settings)}))}}function genlistTinyMCEInit(settings){"object"==typeof tinymce?tinymce.init(settings):setTimeout((function(){genlistTinyMCEInit(settings)}),1e3)}function genListDelete(){var t=$(this),item=t.closest(".gen-list-popup-item"),id=item.attr("data-id"),ctn=t.closest(".picker-popup-content"),btn=$(".js-gen-list-popup-add-item-btn",ctn);btn.hasClass("disabled")&&btn.removeClass("disabled"),item.slideUp(300,(function(){item.siblings().length?item.remove():item.addClass("clone disabled")})),void 0!==id&&$.ajax({url:"/action/manageGenData",data:{id:id,delete:"true",ajax:"true"},cache:!1})}function initFilePickerPopop(items){items.each((function(){var t=$(this);if("string"==typeof t.data("value"))if(0!==t.data("value").length){for(var imgs=t.data("value").split(","),obj={},i=0;i<imgs.length;i++)obj[i]={fullUrl:imgs[i],value:imgs[i].substring(imgs[i].lastIndexOf("/")+1),hash:""};t.attr("data-value",JSON.stringify(obj))}else t.attr("data-value","{}")}))}function initGenListPopupItemsLimit(){0!==$(".gen-list-popup-item .gen-list-popup-item-header-handle").length&&$(".gen-list-popup-list").each((function(){var ctn=this.parentNode,btn=$(".js-gen-list-popup-add-item-btn",ctn);$(".gen-list-popup-item:not(.clone.disabled)",this).length>=btn.attr("data-limit")&&btn.addClass("disabled")})),$(".gen-list-popup-item-bigtext").each((function(){$(this).val($(this).val().replace(new RegExp("<br/>","g"),"\n"))}))}function initGenListPopupItemsSortable(){0!==$(".gen-list-popup-item .gen-list-popup-item-header-handle").length&&$(".gen-list-popup-list").sortable({handle:".gen-list-popup-item-header-handle",helper:fixHelper,stop:function(event,ui){ui.item;genListUpdateItemsOrder(ui.item.closest(".gen-list-popup-list"))}})}function genListUpdateItemsOrder(list,autosave){$(".gen-list-popup-item:not(.clone.disabled)",list).each((function(i){var id=$(this).attr("data-id"),newPosition=i+1;"true"!==$(".gen-list-popup-item-header-title",$(this)).attr("data-has-field-value")&&$(".gen-list-popup-item-header-title .gen-list-popup-item-header-title-pos",$(this)).html(newPosition),$.ajax({url:"/action/manageGenData",data:{id:id,field5:newPosition,ajax:"true"},cache:!1})}))}function genListPopupAdminUpdateExtra(){var t=$(this),item=t.closest(".gen-list-popup-admin-item");$(".gen-list-popup-admin-item-extra",item).removeClass("show"),"text"===t.val()?$(".gen-list-popup-admin-item-extra.text",item).addClass("show"):"bigtext"===t.val()?$(".gen-list-popup-admin-item-extra.bigtext",item).addClass("show"):"select"===t.val()?$(".gen-list-popup-admin-item-extra.select",item).addClass("show"):"file"===t.val()?$(".gen-list-popup-admin-item-extra.file",item).addClass("show"):"gen-list"===t.val()?$(".gen-list-popup-admin-item-extra.gen-list",item).addClass("show"):"icon"===t.val()?$(".gen-list-popup-admin-item-extra.icon",item).addClass("show"):"checkbox"===t.val()?$(".gen-list-popup-admin-item-extra.checkbox",item).addClass("show"):"link"===t.val()&&$(".gen-list-popup-admin-item-extra.link",item).addClass("show")}function genListPopupAdminAddItem(){var ctn=$(this).closest(".gen-list-popup-admin"),list=$(".gen-list-popup-admin-list",ctn),items=$(".gen-list-popup-admin-item",list),clone=$(".gen-list-popup-admin-item.clone",ctn).clone().removeClass("clone"),currType=$(".gen-list-popup-admin-item-type",clone).val();$(".gen-list-popup-admin-item-extra."+currType,clone).addClass("show"),$(".gen-list-popup-admin-item-header-title-num",clone).html(items.length+1),clone.find(".ui-sortable").removeClass("ui-sortable"),clone.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),list.append(clone),initGenListPopupAdminSelectSortable()}function createUniqueCharId(length){void 0===length&&(length=5);for(var possible="ABCDEFGHIJKLMNOPQRSTUVWXYZ",string="",i=0;i<length;i++)string+=possible.charAt(Math.floor(Math.random()*possible.length));return string}function genListCheckboxInputClick(){var t=$(this),ctn=t.closest(".gen-list-popup-item-select-ctn"),max=parseInt(ctn.attr("data-max"));$(".gen-list-item-checkbox-input:checked",ctn).length>max&&t.prop("checked",!1)}function genListItemGenComChange(){var t=$(this),val=$("option:selected",t).val(),item=t.closest(".gen-list-popup-item-content-ctn");$(".gen-list-popup-item-content-item",item).removeClass("show-gencom"),$('.gen-list-popup-item-content-item[data-gencom="'+val+'"]',item).addClass("show-gencom")}function genListSubmit(callbackAfterSave){var t=$(this),popup=t.closest(".gen-list-popup"),popupProcessingCtn=t.closest(".picker-popup-window"),labelId=popup.attr("data-label-id"),items=$(".gen-list-popup-list:first > .gen-list-popup-item:not(.clone.disabled)",popup),nbItems=items.length,nbItemsDone=0,currLang=popup.attr("data-curr-lang"),allLangs=popup.attr("data-all-langs")||popup.attr("data-all-lang"),saveInAllLangs=t.data("saveInAllLangs"),langToSave=currLang;saveInAllLangs&&(langToSave=allLangs),popupProcessingCtn.addClass("is-processing"),0===items.length?window.location.reload():(t.prop("disabled",!0),items.removeClass("has-error"),items.each((function(i){var item=$(this),gendataId=item.attr("data-id"),json={},ids="",allowEditFriendlyURL=item.attr("data-edit-friendly-url"),genListWithoutItemIds=[],genListWithoutItemIdsAdmin=[],genComValue=$(".gen-list-popup-item-content-ctn:first > .gen-list-popup-item-content-item.gen-com-select option:selected",item).val(),isOk=!0;if($(".gen-list-popup-item-content-ctn:first > .gen-list-popup-item-content-item",item).each((function(k){var l=$(this),type=(l.attr("data-id"),l.attr("data-type"));l.hasClass("required")&&("text"===type?validateField($(".gen-list-popup-item-text",l)):"bigtext"===type?validateField($(".gen-list-popup-item-bigtext",l)):"textarea"===type?0===tinymce.get($(".gen-list-popup-item-textarea",l).attr("id")).getContent().length?l.addClass("error"):l.removeClass("error"):"select-country"===type?0===$(".gen-list-popup-item-select-country",l).val().length||0===$(".gen-list-popup-item-select-state.selected",l).val().length?l.addClass("error"):l.removeClass("error"):"select"===type||"custom"===type&&l.hasClass("gen-com-select")?0!==$(".gen-list-popup-item-select",l).val().length||0!==$(".gen-list-popup-item-select-selected-item:not(.clone)",l).length?l.removeClass("error"):l.addClass("error"):"file"===type?0===$(".gen-list-popup-file-picker-value",l).text().length?l.addClass("error"):l.removeClass("error"):"gen-list"===type||("icon"===type?0===$(".picele",l).text().length?l.addClass("error"):l.removeClass("error"):"color"===type?0===$(".color-picker-color-picker-ctn",l).length?l.addClass("error"):l.removeClass("error"):"checkbox"===type&&(0===$(".gen-list-item-checkbox-input:checked",l).length?l.addClass("error"):l.removeClass("error")))),l.hasClass("error")&&"none"!==l.css("display")?($(".gen-list-popup-item-error-message",l).slideDown("200"),isOk=!1):$(".gen-list-popup-item-error-message",l).slideUp("200")})),isOk){$(".gen-list-popup-item-content-ctn:first > .gen-list-popup-item-content-item:not(.gen-com-select)",item).each((function(k){var l=$(this),id=l.attr("data-id"),type=l.attr("data-type");if(json[id]="","text"===type&&(json[id]=$(".gen-list-popup-item-text",l).val()),"bigtext"===type)json[id]=$(".gen-list-popup-item-bigtext",l).val().replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br/>$2");else if("textarea"===type)json[id]="<div class='gen-list-popup-item-textarea' data-id='"+id+"'>"+tinymce.get($(".gen-list-popup-item-textarea",l).attr("id")).getContent()+"</div>";else if("select-country"===type)json[id]=$(".gen-list-popup-item-select-country",l).val(),json[id]+="::",json[id]+=$(".gen-list-popup-item-select-state.selected",l).val();else if("select"===type){"true"===(void 0!==$(".gen-list-popup-item-select-ctn",l).attr("data-multi")?$(".gen-list-popup-item-select-ctn",l).attr("data-multi"):"false")?$(".gen-list-popup-item-select-selected-item:not(.clone)",l).each((function(q){0!==q&&(json[id]+=","),json[id]+=$(".gen-list-popup-item-select-selected-item-val",$(this)).html(),json[id]+="::",json[id]+=$(".gen-list-popup-item-select-selected-item-inner",$(this)).html()})):json[id]=$(".gen-list-popup-item-select",l).val()}else if("file"===type)","===$(".gen-list-popup-file-picker-value",l).html().charAt(0)?json[id]=$(".gen-list-popup-file-picker-value",l).html().substring(1):json[id]=$(".gen-list-popup-file-picker-value",l).html();else if("gen-list"===type){json[id]=$(".gen-list-popup-gen-list-btn",l).attr("data-label-id")?$(".gen-list-popup-gen-list-btn",l).attr("data-label-id"):"",""===$(".alert-submit-form-gen-list",l).attr("data-gen-listception-item-id")&&(genListWithoutItemIds.push(id),void 0!==$(".gen-list-popup-gen-list-btn",l).attr("data-label-id")&&-1===$(".gen-list-popup-gen-list-btn",l).attr("data-label-id").indexOf(l.attr("data-gen-listception-admin-id"))?genListWithoutItemIdsAdmin.push(""):genListWithoutItemIdsAdmin.push(l.attr("data-gen-listception-admin-id")))}else if("icon"===type)json[id]=$(".picele",l).html();else if("color"===type)json[id]=$(".color-picker-color-picker-ctn",l).attr("data-current-color");else if("checkbox"===type)$('input[name="gen-list-item-checkbox-'+id+'"]:checked',l).each((function(chk){0!==chk&&(json[id]+=","),json[id]+=$(this).val()}));else if("link"===type){var linkType=$(".edit-link-tab:checked",l).val(),linkHref="";"page"===linkType?linkHref=$('select[name="page"]',l).val():"internal"===linkType?linkHref=$('[name="internal"]',l).val():"external"===linkType&&(linkHref=$('input[name="external"]',l).val()),json[id]={type:linkType,href:linkHref,query:$('input[name="query"]',l).val(),event:$('input[name="event"]',l).val(),targ:$('select[name="target"]',l).val(),text:$('input[name="text"]',l).val()}}0!==k&&(ids+=","),ids+=l.attr("data-id")}));var data={field1:"gen-list",field2:labelId,field4:JSON.stringify(json),field5:i,field6:ids,field7:genComValue,field10:langToSave,ajax:"true"};if(void 0!==gendataId&&(data.id=gendataId),"true"===allowEditFriendlyURL){var currUrl=urlSafeText($(".gen-list-popup-item-friendly-url-input",item).last().val());"-1"!=currUrl.indexOf("-"+gendataId)&&(currUrl=currUrl.substr(0,currUrl.indexOf("-"+gendataId))),data.friendlyUrl=currUrl}$.ajax({url:"/action/manageGenData",data:data,method:"POST",cache:!1,success:function(data){nbItemsDone++,gendataId=data.split("-")[1],item.attr("data-id",gendataId),item.attr("data-item-id",gendataId),updateGenListJson(gendataId,json,genListWithoutItemIds,genListWithoutItemIdsAdmin,(function(){nbItemsDone===nbItems&&(genListWithoutItemIds.length?window.location.reload():void 0!==callbackAfterSave&&"function"==typeof callbackAfterSave?(callbackAfterSave(),popupProcessingCtn.removeClass("is-processing"),t.prop("disabled",!1)):"true"===popup.attr("data-is-from-gen-list")?(filePreviewPickerClosePopup.apply($(".picker-popup-close-btn",popup)),popupProcessingCtn.removeClass("is-processing"),t.prop("disabled",!1)):window.location.reload())}))}})}else item.addClass("has-error"),t.prop("disabled",!1),popupProcessingCtn.removeClass("is-processing")})))}!function(){for(var lastTime=0,vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&!window.requestAnimationFrame;++x)window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(callback,element){var currTime=(new Date).getTime(),timeToCall=Math.max(0,1e3/60-Math.abs(currTime-lastTime)),id=window.setTimeout((function(){callback(currTime+timeToCall)}),timeToCall);return lastTime=currTime+timeToCall,id}),rAF=window.requestAnimationFrame,window.cancelAnimationFrame||(window.cancelAnimationFrame=function(id){clearTimeout(id)}),cAF=window.cancelAnimationFrame}();var updateGenListJson=function(id,json,indexes,adminIdArray,callback){if(indexes.length>0){for(var i in indexes){var sb=""===adminIdArray[i]?"":"-"+adminIdArray[i];json[indexes[i]]="sub-gen-list-"+id+sb}var params={id:id,field4:JSON.stringify(json),ajax:"true"};$.ajax({url:"/action/manageGenData",data:params,method:"POST",cache:!1,success:function(data){callback()}})}else callback()},validateForm=function(ctn){ctn.each((function(){var t=$(this),toValidateItems=$(".form-input:not(.select-state-input:not(.selected))",t),toValidateUpload=$(".form-item-upload.required",t),toValidateCheck=$(".form-check-input.required",t),password=$(".js-password",t),passwordConfirm=$(".js-password-confirm",t),email=$(".js-email",t),emailConfirm=$(".js-email-confirm",t),btn=$(".js-form-btn",t),isOk=!0,passwordOk=!0,termsOk=!0,checkOk=!0,emailOk=!0,fieldsErrorMessage=$(".js-form-error-message.fields",t),fieldsErrorCheckbox=$(".js-form-error-message.checkbox",t),fieldsErrorTerms=$(".js-form-error-message.terms",t),fieldsErrorPassword=$(".js-form-error-message.password",t),fieldsErrorEmail=$(".js-form-error-message.email-check",t);return toValidateItems.each((function(){var tChild=$(this);validateField(tChild),tChild.hasClass("error")&&(isOk=!1)})),toValidateUpload.each((function(){var tUpload=$(this);""===$(".form-item-upload-input",tUpload).val()&&tUpload.addClass("error"),tUpload.hasClass("error")&&(isOk=!1)})),toValidateCheck.each((function(){var tCheck=$(this),name=tCheck.attr("name"),tCtn=tCheck.closest(".form-checkbox-ctn"),form=tCheck.closest("form");tCheck.is(":checked")||$(".form-check-input[name="+name+"]",form).is(":checked")?tCtn.removeClass("error"):(tCtn.addClass("error"),"terms"!==tCtn.attr("name")&&(checkOk=!1)),"terms"===tCheck.attr("name")&&tCtn.hasClass("error")&&(termsOk=!1),tCtn.hasClass("error")&&(termsOk=!1)})),0===password.length||0===passwordConfirm.length||password.val()===passwordConfirm.val()&&0!==password.val().length||(0===password.val().length?(password.removeClass("success").addClass("error"),passwordOk=!1):(password.addClass("success").removeClass("error"),passwordOk=!0),password.val()!==passwordConfirm.val()||0===passwordConfirm.val().length?(passwordConfirm.removeClass("success").addClass("error"),passwordOk=!1):(passwordConfirm.removeClass("error"),passwordOk=!0,0!==password.val().length&&passwordConfirm.addClass("success"))),0===email.length||0===emailConfirm.length||email.val()===emailConfirm.val()&&0!==email.val().length||(0===email.val().length?(email.removeClass("success").addClass("error"),emailOk=!1):(email.addClass("success").removeClass("error"),emailOk=!0),email.val()!==emailConfirm.val()||0===email.val().length?(emailConfirm.removeClass("success").addClass("error"),emailOk=!1):(emailConfirm.removeClass("error"),emailOk=!0,0!==email.val().length&&emailConfirm.addClass("success"))),t.addClass("is-checked"),termsOk?fieldsErrorTerms.slideUp(300):fieldsErrorTerms.slideDown(300),checkOk?fieldsErrorCheckbox.slideUp(300):fieldsErrorCheckbox.slideDown(300),0!==password.length&&0!==passwordConfirm.length&&(0!==password.length&&passwordOk?(ctn.addClass("has-password"),password.add(passwordConfirm).removeClass("error"),fieldsErrorPassword.slideUp(300)):(ctn.removeClass("has-password"),password.add(passwordConfirm).addClass("error"),fieldsErrorPassword.slideDown(300))),0!==email.length&&0!==emailConfirm.length&&(0!==email.length&&emailOk?(ctn.addClass("has-email"),email.add(emailConfirm).removeClass("error"),fieldsErrorEmail.slideUp(300)):(ctn.removeClass("has-email"),email.add(emailConfirm).addClass("error"),fieldsErrorEmail.slideDown(300))),isOk?fieldsErrorMessage.slideUp(300):fieldsErrorMessage.slideDown(300),isOk&&passwordOk&&termsOk&&checkOk&&emailOk?(btn.removeClass("disabled"),ctn.removeClass("has-error").removeClass("error-password"),fieldsErrorTerms.slideUp(300),!0):(btn.addClass("disabled"),ctn.addClass("has-error"),!passwordOk&&password.hasClass("required")?ctn.addClass("error-password"):ctn.removeClass("error-password"),!1)}))},validateField=function(elt){var tag=elt[0].tagName,type=elt.attr("type"),val=elt.val()||"",attrClass=elt.attr("data-validator-apply-class-on"),classTarget=void 0!==attrClass?elt.closest(attrClass):elt,validate=elt.attr("data-validate"),emailValid=!0,whiteSpaceValid=!0,urlValid=!0,telValid=!0,inputValid=!0;val.replace(/\s/g,"").length||(whiteSpaceValid=!1),"INPUT"!==tag||"email"!==type&&"email"!==validate||"default"===validate?"INPUT"===tag&&"url"===validate&&"default"!==validate?urlValid=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+(:[0-9]+)?|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/.test(val):"INPUT"!==tag||"tel"!==type&&"tel"!==validate||"default"===validate?elt.hasClass("form-item-upload-input")?classTarget.add(elt).hasClass("required")&&""!==elt.val()?classTarget.add(elt).removeClass("error").addClass("success"):classTarget.add(elt).addClass("error").removeClass("success"):(classTarget.add(elt).addClass("success").removeClass("error"),classTarget.hasClass("required")&&0===$.trim(val).length?(classTarget.add(elt).removeClass("success").addClass("error"),inputValid=!1):classTarget.hasClass("required")||0!==val.length||classTarget.add(elt).removeClass("success").removeClass("error")):telValid=/^\s*(?:\+?(\d{1,3}))?[-. (]*(\d{3})[-. )]*(\d{3})[-. ]*(\d{4})(?: *x(\d+))?\s*$/.test(val):emailValid=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(val),emailValid&&urlValid&&telValid&&inputValid&&whiteSpaceValid?classTarget.add(elt).removeClass("error").addClass("success"):0!==val.length||classTarget.hasClass("required")?classTarget.add(elt).addClass("error").removeClass("success"):classTarget.add(elt).removeClass("error").removeClass("success")};function urlSafeText(text){var translate={"à":"a","â":"a","ç":"c","é":"e","è":"e","ê":"e","ë":"e","ô":"o","î":"i","ï":"i","æ":"ae","œ":"oe"};return text.toLowerCase().replace(/(&amp;)|\s+/g,"-").replace(/[\u00E0\u00E2\u00E7\u00E9\u00E8\u00EA\u00EB\u00F4\u00EE\u00EF\u00E6\u0153]/g,(function(match){return translate[match]})).replace(/[^a-z0-9\-_]/g,"")}function genListPopupAdminAddSaveList(){genListSaveAdminPopup($(this).closest(".gen-list-popup-admin").closest(".gen-list-popup"))}function genListPopupAdminDelItem(){var item=$(this).closest(".gen-list-popup-admin-item"),popup=item.closest(".gen-list-popup");item.remove(),genListUpdateAdminItemsOrder(popup)}function initGenListPopupAdminSortable(){0!==$(".gen-list-popup-admin-item-handle").length&&$(".gen-list-popup-admin-list").sortable({handle:".gen-list-popup-admin-item-handle",items:".gen-list-popup-admin-item",helper:fixHelper,stop:function(event,ui){ui.item;genListUpdateAdminItemsOrder(ui.item.closest(".gen-list-popup"))}})}function genListSaveAdminPopup(popup){var adminId=popup.attr("data-admin-id"),popupId=void 0===adminId?popup.attr("data-label-id"):adminId,items=$('.gen-list-popup-admin[data-admin="'+popupId+'"] .gen-list-popup-admin-item:not(.clone)',popup),genId=void 0!==popup.attr("data-id")?popup.attr("data-id"):"",popupProcessingCtn=popup.find(".picker-popup-window"),adminSection=$('.gen-list-popup-admin[data-admin="'+adminId+'"]'),nameList="",idList="",typeList="",requiredList="",genComList="",genComRequired=adminSection.find(".gen-list-popup-admin-gencom-required",popup).is(":checked"),extraData="",itemTitleFromFieldId="",mainItemTitleId=adminSection.find(".gen-list-popup-admin-title-select:not(.gencom)",popup).val(),genComValue="";$(".js-remove-on-submit").length>0&&$(".js-remove-on-submit").remove(),popup.find(".gen-list-popup-admin-title-select.gencom").length>0?(itemTitleFromFieldId+='{"mainTitle":"'+mainItemTitleId+'"',itemTitleFromFieldId+=',"gencomsTitles":"',popup.find(".gen-list-popup-admin-item-extra-select-item.gencom").each((function(i){var gencomTitleSelectVal=$(this).find(".gen-list-popup-admin-title-select.gencom").length?$(this).find(".gen-list-popup-admin-title-select.gencom").val():"";itemTitleFromFieldId+=$(this).find(".gen-list-popup-admin-item-extra-select-option-value").val(),itemTitleFromFieldId+=":",itemTitleFromFieldId+=gencomTitleSelectVal,i+1!==popup.find(".gen-list-popup-admin-item-extra-select-item.gencom").length&&(itemTitleFromFieldId+="|")})),itemTitleFromFieldId+='"}'):itemTitleFromFieldId=mainItemTitleId,adminSection.find(".gen-list-popup-admin-item-extra.gencom").length>0&&adminSection.find(".gen-list-popup-admin-item-extra.gencom .gen-list-popup-admin-item-extra-select-item").each((function(i){var gencomIdVal=$(".gen-list-popup-admin-item-extra-select-option-value",$(this)).val(),gencomTextVal=$(".gen-list-popup-admin-item-extra-select-inner-html",$(this)).val();0!==i&&(genComValue+="|"),""!==gencomIdVal&&""!==gencomTextVal&&(genComValue+=gencomIdVal,genComValue+=":",genComValue+=gencomTextVal)})),popupProcessingCtn.addClass("is-processing"),items.each((function(i){var tItem=$(this),tType=$(".gen-list-popup-admin-item-type",tItem),itemId=$(".gen-list-popup-admin-item-id",tItem).val();0!==i&&(nameList+=",",idList+=",",typeList+=",",requiredList+=",",genComList+=",",extraData+=","),nameList+=$(".gen-list-popup-admin-item-header-title",tItem).html(),idList+=itemId,typeList+=tType.val(),requiredList+=$(".gen-list-popup-admin-item-required",tItem).is(":checked"),genComList+=$(".gen-list-popup-admin-item-gencom option:selected",tItem).val(),"text"===tType.val()?(extraData+=itemId+":{",extraData+='"default-value":"',extraData+=$(".gen-list-popup-admin-item-extra-text-prepopulate",tItem).val(),extraData+='"',extraData+="}"):"bigtext"===tType.val()?(extraData+=itemId+":{",extraData+='"default-value":"',extraData+=$(".gen-list-popup-admin-item-extra-bigtext-prepopulate",tItem).val(),extraData+='"',extraData+="}"):"select"===tType.val()?(extraData+=itemId+":{",extraData+='"values":"',$(".gen-list-popup-admin-item-extra.select .gen-list-popup-admin-item-extra-select-item",tItem).each((function(s){0!==s&&(extraData+=","),0!==$(".gen-list-popup-admin-item-extra-select-option-value",$(this)).val().length?extraData+=$(".gen-list-popup-admin-item-extra-select-option-value",$(this)).val():extraData+=$(".gen-list-popup-admin-item-extra-select-inner-html",$(this)).val(),extraData+=":",extraData+=$(".gen-list-popup-admin-item-extra-select-inner-html",$(this)).val()})),extraData+='"',extraData+=', "multiple":"',extraData+=$(".gen-list-popup-admin-item-extra-select-multiple",tItem).is(":checked"),extraData+='"',$(".gen-list-popup-admin-item-extra-select-select",tItem).length&&(extraData+=', "type":"',extraData+=$(".gen-list-popup-admin-item-extra-select-select",tItem).val(),extraData+='"'),extraData+="}"):"checkbox"===tType.val()?(extraData+=itemId+":{",extraData+='"values":"',$(".gen-list-popup-admin-item-extra.checkbox .gen-list-popup-admin-item-extra-select-item",tItem).each((function(s){0!==s&&(extraData+=","),0!==$(".gen-list-popup-admin-item-extra-select-option-value",$(this)).val().length?extraData+=$(".gen-list-popup-admin-item-extra-select-option-value",$(this)).val():extraData+=$(".gen-list-popup-admin-item-extra-select-inner-html",$(this)).val(),extraData+=":",extraData+=$(".gen-list-popup-admin-item-extra-select-inner-html",$(this)).val()})),extraData+='"',extraData+=', "number":"',extraData+=$(".gen-list-popup-admin-item-extra-checkbox-number",tItem).val(),extraData+='"',extraData+="}"):"file"===tType.val()?(extraData+=itemId+":{",$(".gen-list-popup-admin-item-extra.file",tItem).each((function(f){0!==f&&(extraData+=","),$("input",$(this)).each((function(k){0!==k&&(extraData+=","),extraData+=$(this).attr("name")+':"'+$(this).val()+'"'}))})),extraData+="}"):"gen-list"===tType.val()?(extraData+=itemId+":{",$(".gen-list-popup-admin-item-extra.gen-list",tItem).each((function(f){0!==f&&(extraData+=","),$("input",$(this)).each((function(k){0!==k&&(extraData+=","),extraData+=$(this).attr("name")+':"'+$(this).val()+'"'}))})),extraData+="}"):"icon"===tType.val()?(extraData+=itemId+":{",extraData+=$(".gen-list-popup-admin-item-extra-icon-input",tItem).val(),extraData+="}"):"link"===tType.val()?(extraData+=itemId+":{",extraData+='"default-value":"',extraData+=$(".gen-list-popup-admin-item-extra-link-prepopulate",tItem).val(),extraData+='"',extraData+="}"):extraData+=""}));var data={id:genId,field1:"gen-list-popup-admin",field2:nameList,field3:idList,field4:typeList,field5:requiredList,field6:genComValue,field7:0!==genComValue.trim().length?genComList:"",field8:genComRequired,field10:itemTitleFromFieldId,field11:popupId,extraData:extraData,ajax:"true"};console.log(data),$.ajax({url:"/action/manageGenData",data:data,method:"POST",cache:!1,success:function(data){-1!==data.indexOf("success")?location.reload():popupProcessingCtn.removeClass("is-processing")}})}function genListUpdateAdminItemsOrder(popup,autosave){popup.data("id");var adminId=popup.attr("data-admin-id"),popupId=void 0===adminId?popup.attr("data-label-id"):adminId;$('.gen-list-popup-admin[data-admin="'+popupId+'"] .gen-list-popup-admin-item:not(.clone)',popup).each((function(i){$(".gen-list-popup-admin-item-header-title-num",$(this)).html(i+1)}))}function genListAdminSelectAdd(){var ctn=$(this).closest(".gen-list-popup-admin-item-extra.select, .gen-list-popup-admin-item-extra.checkbox, .gen-list-popup-admin-item-extra.gencom"),list=$(".gen-list-popup-admin-item-extra-select-list",ctn),clone=$(".gen-list-popup-admin-item-extra-select-item",ctn).eq(0).clone();$(".gen-list-popup-admin-item-extra-select-option-value",clone).val(""),$(".gen-list-popup-admin-item-extra-select-inner-html",clone).val(""),$(".gen-list-popup-admin-title-selector",clone).remove(),list.append(clone)}function genListSelectAdminSelectType(e){var t=$(this),ctn=t.closest(".gen-list-popup-admin-item-extra ");""===t.val()?($(".gen-list-popup-admin-item-extra-select-list",ctn).removeClass("hidden"),$(".gen-list-popup-admin-item-extra-select-add",ctn).removeClass("hidden")):($(".gen-list-popup-admin-item-extra-select-list",ctn).addClass("hidden"),$(".gen-list-popup-admin-item-extra-select-add",ctn).addClass("hidden"))}function genListSaveAdminSelectDelItem(){$(this).closest(".gen-list-popup-admin-item-extra-select-item").remove()}function initGenListPopupAdminSelectSortable(){0!==$(".gen-list-popup-admin-item-extra-select-handle:not(.ui-sortable-handle)").length&&$(".gen-list-popup-admin-item-extra-select-list").sortable({handle:".gen-list-popup-admin-item-extra-select-handle",helper:fixHelper})}function genListFilterMultipleSelectOptions(){$('.gen-list-popup-item-select-ctn[data-multi="true"]').each((function(e){var ctn=$(this);$(".gen-list-popup-item-select option",ctn).each((function(s){var currOption=$(this),optionValue=currOption.attr("value");$(".gen-list-popup-item-select-selected-item:not(.clone)",ctn).each((function(v){var currValItem=$(this),currVal=$(".gen-list-popup-item-select-selected-item-val",currValItem).html();if(optionValue===currVal)return currOption.hide(),!1}))}))}))}function genListPopupItemSelectChange(){var input=$(this),ctn=input.closest(".gen-list-popup-item-select-ctn"),list=$(".gen-list-popup-item-select-selected-ctn",ctn),clone=$(".gen-list-popup-item-select-selected-item.clone",list),val=input.val(),inner=$("option:selected",input).html();if(0!==val.length){$("option:selected",input).hide();var newElt=clone.clone().removeClass("clone");$(".gen-list-popup-item-select-selected-item-val",newElt).html(val),$(".gen-list-popup-item-select-selected-item-inner",newElt).html(inner),$(".gen-list-popup-item-select-selected-item-del",newElt).click(genListPopupItemSelectDel),list.append(newElt)}}function genListPopupItemSelectDel(){var ctn=$(this).closest(".gen-list-popup-item-select-selected-item"),item=ctn.closest(".gen-list-popup-item-select-ctn"),val=$(".gen-list-popup-item-select-selected-item-val",ctn).html();$('.gen-list-popup-item-select option[value="'+val+'"]',item).show(),ctn.remove()}function genListPopupAdminIconSelectChange(){var t=$(this),val=t.val(),ctn=t.closest(".gen-list-popup-admin-item-extra.icon"),input=$(".gen-list-popup-admin-item-extra-icon-input",ctn),inputVal=input.val();0!==inputVal.length&&(inputVal+=","),inputVal+=val,input.val(inputVal)}function genListSelectCountryChange(){var t=$(this),val=t.val(),ctn=t.closest(".gen-list-popup-item-select-country-ctn");$(".gen-list-popup-item-select-state",ctn).removeClass("selected"),"CA"===val||"CAN"===val||"canada"===val||"Canada"===val?$(".gen-list-popup-item-select-state.ca",ctn).addClass("selected"):"US"===val||"USA"===val||"United-States"===val||"united-states"===val?$(".gen-list-popup-item-select-state.us",ctn).addClass("selected"):$(".gen-list-popup-item-select-state.other",ctn).addClass("selected")}function genListUpdateTitle(){var t=$(this),val=t.html(),ctn=t.closest(".gen-list-popup-admin-item-main-content"),idInput=$(".gen-list-popup-admin-item-id",ctn);0===idInput.val().length&&idInput.val(formatStringForUrlHandle(val))}function genListGencomIdChange(){var t=$(this),initVal=t.attr("data-init-option-id"),gencomOptions=t.closest(".gen-list-popup-admin").find(".gen-list-popup-admin-item-gencom option[value="+initVal+"]"),titleSelect=t.closest(".gen-list-popup-admin-item-extra-select-item.gencom").find(".gen-list-popup-admin-title-selector");t.val()!==initVal?titleSelect.slideUp((function(){$(this).addClass("js-remove-on-submit"),gencomOptions.addClass("js-remove-on-submit")})):titleSelect.slideDown((function(){$(this).removeClass("js-remove-on-submit"),gencomOptions.removeClass("js-remove-on-submit")}))}function genListSearch(e){var t=$(this),items=t.closest(".gen-list-popup").find("> .picker-popup-window > .picker-popup-content > .popup-default-content-ctn > .gen-list-popup-list > .gen-list-popup-item"),regex=new RegExp(t.val().trim());items.each((function(){var that=$(this),title=$(".gen-list-popup-item-header-title",that).text();regex.test(title)?that.css("display",""):that.css("display","none")}))}function filePreviewPickerSumbit(e){var t=$(this),popup=t.closest(".file-preview-picker-popup"),multi=popup.attr("data-multi"),itemSelected=($(".file-preview-picker-main-directory",popup),$(".file-preview-picker-item:not(.folder).selected",popup)),value="",fullPathValue="";0!==$(".file-preview-picker-popup-selection-list",popup).length?$(".file-preview-picker-popup-selection-item:not(.clone)",popup).each((function(index){0!==parseInt(index)&&(value+=",",fullPathValue+=","),fullPathValue+=$(this).attr("data-url"),value+=$(this).attr("data-url")})):$.each(JSON.parse($(this).attr("data-value")),(function(index,item){0!==parseInt(index)&&(value+=",",fullPathValue+=","),fullPathValue+=this.fullUrl,value+=this.fullUrl}));var elementToUpdate=$(t.attr("data-element-to-update")),typeOfUpdate=t.attr("data-type-of-update"),valueToUpdate=t.attr("data-value-to-update"),dataUpdateLabel=t.data("updateLabel"),updateElementValue=$(t.data("updateElementValue")),updateLabelWithFullPath=t.data("updateLabelWithFullPath"),labelId=popup.attr("data-label-id"),lang=popup.attr("data-curr-lang"),langs=popup.attr("data-all-langs")||popup.attr("data-all-lang"),updateInAllLangs=t.data("updateLabelInAllLangs"),useNamehashOnly=t.data("useNamehashOnly"),itemNamehash=itemSelected.attr("data-hashname"),fullBGUrl='url("'+fullPathValue+'")';useNamehashOnly?value=itemNamehash:!0===updateLabelWithFullPath&&"true"!==multi&&(value=fullPathValue),0===itemSelected.length&&(value="",fullPathValue="",fullBGUrl="");try{JSON.parse(t.attr("data-value")).map((function(item){return item.value}));var mappedPaths=JSON.parse(t.attr("data-value")).map((function(item){return item.fullUrl}));fullPathValue=mappedPaths.join(),value=useNamehashOnly?JSON.parse(t.attr("data-value"))[0].hash:fullPathValue,fullBGUrl='url("'+JSON.parse(t.attr("data-value"))[0].fullUrl+'")'}catch(e){}if("attribute"===typeOfUpdate?elementToUpdate.attr(valueToUpdate,fullPathValue):"property"===typeOfUpdate?elementToUpdate.css(valueToUpdate,fullBGUrl):"val"===typeOfUpdate?(elementToUpdate.val(fullPathValue),elementToUpdate.trigger("change")):"text"===typeOfUpdate&&elementToUpdate.text(fullPathValue),elementToUpdate.attr("data-preview-item-id",value),elementToUpdate.trigger("file-picker-change",{fullPathValue:fullPathValue,fullBGUrl:fullBGUrl,useNamehashOnly:useNamehashOnly,value:value}),updateElementValue.length&&updateElementValue.html(value),dataUpdateLabel){var langVal=updateInAllLangs?langs:lang,callback=function(){};void 0!==e.data&&null!==e.data&&void 0!==e.data.callback&&(callback="function"==typeof e.data.callback?e.data.callback():function(){}),updateLabelLangs(labelId,value,langVal,callback,!1,!1)}filePreviewPickerClosePopup.apply(t)}function filePreviewPickerItemClick(){var t=$(this),ctn=t.closest(".file-preview-picker-popup-inner"),popup=t.closest(".file-preview-picker-popup"),multi="true"===popup.attr("data-multi"),required=ctn.data("required"),main=$(".file-preview-picker-main-directory",popup),btn=$(".file-preview-picker-popup-accept-btn",popup),currUrl=(popup.attr("data-detail-panel"),t.attr("data-file-url")+t.attr("data-value"));if(t.hasClass("selected")){if(!required||required&&$(".file-preview-picker-item.selected",ctn).length>1){t.removeClass("selected"),$('.file-preview-picker-popup-selection-item[data-url="'+currUrl+'"]',popup).remove();var data={};$.each($(".file-preview-picker-item.selected:not(.folder)",ctn),(function(index,item){var fileUrlSeparator="/"===$(item).attr("data-file-url").charAt($(item).attr("data-file-url").length-1)?"":"/";data[index]={fullUrl:$(item).attr("data-file-url")+fileUrlSeparator+$(item).attr("data-value"),value:$(item).attr("data-value"),hash:$(item).attr("data-hashname")}})),btn.attr("data-value",JSON.stringify(data)),!multi||multi&&0===ctn.length&&"false"===main.attr("data-use-ajax")?$(".file-preview-picker-item.folder",ctn).removeClass("selected"):multi&&"true"===main.attr("data-use-ajax")&&$(".file-preview-picker-item.selected.folder",ctn).each((function(){var f=$(this),fId=f.attr("data-id"),found=!1,fileUrlSeparator="/"===f.attr("data-file-url").charAt(f.attr("data-file-url").length-1)?"":"/",folderVal=f.attr("data-file-url")+fileUrlSeparator+f.attr("data-value");$('.file-preview-picker-directory[data-id="'+fId+'"]',popup).hasClass("items-loaded")&&($.each(JSON.parse(btn.attr("data-value")),(function(index,file){if(-1!=file.fullUrl.indexOf(folderVal))return found=!0,!1})),found||f.removeClass("selected"))}))}}else{multi||($(".file-preview-picker-item.selected",ctn).removeClass("selected"),$(".file-preview-picker-popup-selection-item:not(.clone)",popup).remove()),t.addClass("selected");data=JSON.parse(btn.attr("data-value"));if($.each($(".file-preview-picker-item.selected:not(.folder)",ctn),(function(index,item){var fileUrlSeparator="/"===$(item).attr("data-file-url").charAt($(item).attr("data-file-url").length-1)?"":"/";data[index]={fullUrl:$(item).attr("data-file-url")+fileUrlSeparator+$(item).attr("data-value"),value:$(item).attr("data-value"),hash:$(item).attr("data-hashname")}})),btn.attr("data-value",JSON.stringify(data)),$(".file-preview-picker-item.folder",ctn).each((function(){var f=$(this),fId=f.attr("data-id"),fCtn=f.closest(".file-preview-picker-main-directory"),fCurrentDirectory=$('.file-preview-picker-directory[data-id="'+fId+'"]',fCtn);0!==$(".file-preview-picker-item:not(.folder).selected",fCurrentDirectory).length&&f.addClass("selected")})),0===$('.file-preview-picker-popup-selection-item[data-url="'+currUrl+'"]',popup).length){var newPanelItem=$(".file-preview-picker-popup-selection-item.clone",popup).clone().removeClass("clone");newPanelItem.attr("data-url",currUrl),$(".file-preview-picker-popup-selection-title",newPanelItem).text(currUrl),$(".file-preview-picker-popup-selection-list",popup).append(newPanelItem)}}filePreviewCheckDetailTabCounter(popup)}function filePreviewCheckDetailTabCounter(popup){var count=$(".file-preview-picker-popup-selection-item:not(.clone)",popup).length;$(".file-preview-picker-selection-count",popup).text(count)}function filePreviewPickerClosePopup(){var t=$(this),popup=t.closest(".picker-popup"),searchInput=$(".file-preview-picker-input",popup),items=$(".file-preview-picker-item",popup);pickerClosePopup.call(t,(function(){items.show(),searchInput.val("")}))}function filePreviewPickerSearch(e){var t=$(this),popup=t.closest(".file-preview-picker-popup"),items=$(".file-preview-picker-item:not(.clone)",popup),regex=new RegExp(t.val().trim());items.each((function(){var that=$(this),id=that.data("value"),itemParent=that.closest(".file-preview-picker-item-big");regex.test(id)?itemParent.css("display",""):(that.hasClass("selected")&&that.removeClass("selected"),itemParent.css("display","none"))}))}function filePreviewPickerDirectoryOpen(){var t=$(this),id=t.attr("data-id"),ctn=t.closest(".file-preview-picker-popup-inner"),bigCtn=ctn.closest(".picker-popup-content"),folder=$('.file-preview-picker-directory[data-id="'+id+'"]',ctn),directory=$(".file-preview-picker-current-directory",bigCtn),main=$(".file-preview-picker-main-directory",bigCtn),tW=t.width(),tH=t.height(),tPosTop=t.position().top+tH/2,tPosLeft=t.position().left+tW/2,ctnW=ctn.width(),tPersTop=100*tPosTop/ctn.height(),tPersLeft=100*tPosLeft/ctnW;folder.stop(!0,!0),directory.html(t.attr("data-directory-to-open")),folder.css({visibility:"visible",top:tPersTop+"%",left:tPersLeft+"%"}),"true"===main.attr("data-use-ajax")&&filePickerLoadDirectory(t.attr("data-directory-to-open"),folder),folder.animate({top:"0%",left:"0%"},500,(function(){folder.parents(".file-preview-picker-directory").add(folder.parents(".file-preview-picker-main-directory")).addClass("child-folder-open")})),folder.addClass("show")}function filePreviewPickerDirectoryClose(){var t=$(this),id=t.attr("data-id"),ctn=t.closest(".file-preview-picker-popup-inner"),bigCtn=ctn.closest(".picker-popup-content"),btn=$('.file-preview-picker-item.folder[data-id="'+id+'"]',ctn),folder=$('.file-preview-picker-directory[data-id="'+id+'"]',ctn),directory=$(".file-preview-picker-current-directory",bigCtn),tW=($(".file-preview-picker-main-directory",bigCtn),btn.width()),tH=btn.height(),tPosTop=btn.position().top+tH/2,tPosLeft=btn.position().left+tW/2,ctnW=ctn.width(),tPersTop=100*tPosTop/ctn.height(),tPersLeft=100*tPosLeft/ctnW;folder.parent(".file-preview-picker-directory").removeClass("child-folder-open"),0===folder.parent(".file-preview-picker-directory").length&&folder.parent(".file-preview-picker-main-directory").removeClass("child-folder-open"),directory.html(btn.attr("data-directory-parent")),folder.animate({top:tPersTop+"%",left:tPersLeft+"%"},500,(function(){folder.css("visibility","none")})),folder.removeClass("show")}function filePreviewPickerHandleDrop(e){e.preventDefault();for(var it=this,$loadingBar=$(".status",it),fileAccept=$(it).closest(".file-preview-picker-popup-upload").find("input[type=file]").attr("accept").split(","),$currDir=$(it).closest(".file-preview-picker-popup").find(".file-preview-picker-main-directory, .file-preview-picker-directory.show").filter(":not(.child-folder-open)"),files=it.files||e.originalEvent.dataTransfer.files,data=new FormData,i=0;i<files.length;i++){var file=files[i],ext=file.name.substring(file.name.lastIndexOf("."));if(!fileAccept||fileAccept.indexOf(ext)>-1||fileAccept.indexOf(file.type)>-1){var reader=new FileReader;data.append("bulk[]",file),reader.readAsDataURL(file),$loadingBar.css("width",100/files.length*i+"%")}}if(!data.get("bulk[]"))return $loadingBar.css("width","0"),"file"!==it.getAttribute("type")&&(it.style.backgroundColor="mistyRose"),!1;data.append("dir",$currDir.attr("data-directory")),data.append("pageName",window.location.pathname.replace(/^\//,"")),data.append("ajax","true"),$.ajax({url:"/action/uploadMedia",type:"POST",data:data,cache:!1,contentType:!1,processData:!1,success:function(response){$loadingBar.css("width","100%").delay(310).css("opacity","0").delay(310).css("width","").delay(310).css("opacity",""),"file"!==it.getAttribute("type")&&(it.style.backgroundColor=""),$currDir.removeClass("items-loaded"),filePickerLoadDirectory($currDir.attr("data-directory"),$currDir,!0)},error:function(response){console.error(response)}})}var CPhslToRgb=function(ctn){var r,g,b,light=1*ctn.attr("data-light"),saturation=1*ctn.attr("data-saturation"),h=1*ctn.attr("data-hue")/360,s=isNaN(saturation)?1:saturation;if(0===s)r=g=b=light;else{var q=light<.5?light*(1+s):light+s-light*s,p=2*light-q;r=CPhue2rgb(p,q,h+1/3),g=CPhue2rgb(p,q,h),b=CPhue2rgb(p,q,h-1/3)}return"#"+CPnumToHex(Math.round(255*r))+CPnumToHex(Math.round(255*g))+CPnumToHex(Math.round(255*b))},CPhue2rgb=function(p,q,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?p+6*(q-p)*t:t<.5?q:t<2/3?p+(q-p)*(2/3-t)*6:p},CPrgbToHsl=function(r,g,b){var max,min,h,s,l;if(r/=255,g/=255,b/=255,l=((max=Math.max(r,g,b))+(min=Math.min(r,g,b)))/2,max==min)h=s=0;else{var d=max-min;switch(s=l>.5?d/(2-max-min):d/(max+min),max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return[h,s,l]},CPnumToHex=function(num){var val=num.toString(16);return 1===val.length?0+val:val},CPclampValue=function(val,min,max){return Math.min(Math.max(val,min),max)},CPsetColor=function(targetCtn,color){var target=targetCtn||$(".color-picker-color-picker-ctn");void 0!==target&&target.each((function(){var ctn=$(this),colorCanvas=$(".color-picker-color-picker",ctn),hueCanvas=$(".color-picker-hue-picker",ctn);color&&ctn.attr("data-current-color",color);var hsvValue,hsvSaturation,hex=ctn.attr("data-current-color"),hexVal="#"===hex.charAt(0)?hex.substr(1):hex,r=parseInt(hexVal.substr(0,2),16),g=parseInt(hexVal.substr(2,2),16),b=parseInt(hexVal.substr(4,2),16),hslValues=CPrgbToHsl(r,g,b),hue=360*hslValues[0];ctn.attr("data-hue",hue);var saturation=hslValues[1];ctn.attr("data-saturation",saturation);var light=hslValues[2];ctn.attr("data-light",light),hsvSaturation=2*((hsvValue=(2*light+saturation*(1-Math.abs(2*light-1)))/2)-light)/hsvValue,ctn.attr("data-hue-color","hsl("+hue+", 100%, 50%)"),CPsetupColorCanvas(colorCanvas),CPupdateHue(hslValues[0]*hueCanvas[0].height,hueCanvas),CPupdateColor(hsvSaturation*colorCanvas[0].width,(1-hsvValue)*colorCanvas[0].height,colorCanvas)}))},CPclearCanvasListeners=function(){$(".color-picker-color-picker").off("mousedown",CPstartDragColor),$(".color-picker-hue-picker").off("mousedown",CPstartDragHue)},CPsetupCanvasListeners=function(){$(".color-picker-color-picker").on("mousedown",CPstartDragColor),$(".color-picker-color-picker").on("click",CPclickColor),$(".color-picker-hue-picker").on("mousedown",CPstartDragHue),$(".color-picker-hue-picker").on("click",CPclickHue),$(".color-picker-color-current").on("click",CPcopyColor),$(".color-picker-color-input-text").on("focusout",CPtextColor)},CPsetupColorCanvas=function(colorCanvas){var ctx=colorCanvas[0].getContext("2d");CPpaintColorCanvas(ctx,colorCanvas)},CPpaintColorCanvas=function(ctx,colorCanvas){var ctn=colorCanvas.closest(".color-picker-color-picker-ctn");ctx.fillStyle=ctn.attr("data-hue-color"),ctx.fillRect(0,0,colorCanvas[0].width,colorCanvas[0].height),CPpaintWhiteGradient(ctx,colorCanvas),CPpaintBlackGradient(ctx,colorCanvas)},CPpaintWhiteGradient=function(ctx,colorCanvas){var whiteGradient=ctx.createLinearGradient(0,0,colorCanvas[0].width,0);whiteGradient.addColorStop(0,"#fff"),whiteGradient.addColorStop(1,"transparent"),ctx.fillStyle=whiteGradient,ctx.fillRect(0,0,colorCanvas[0].width,colorCanvas[0].height)},CPpaintBlackGradient=function(ctx,colorCanvas){var blackGradient=ctx.createLinearGradient(0,0,0,colorCanvas[0].height);blackGradient.addColorStop(0,"transparent"),blackGradient.addColorStop(1,"#000"),ctx.fillStyle=blackGradient,ctx.fillRect(0,0,colorCanvas[0].width,colorCanvas[0].height)},CPsetupHueCanvas=function(){$(".color-picker-hue-picker").each((function(){var t=$(this),ctx=t[0].getContext("2d"),gradient=ctx.createLinearGradient(0,0,0,t[0].height);gradient.addColorStop(0,"hsl(0, 100%, 50%)"),gradient.addColorStop(.17,"hsl(61.2, 100%, 50%)"),gradient.addColorStop(.33,"hsl(118.8, 100%, 50%)"),gradient.addColorStop(.5,"hsl(180, 100%, 50%)"),gradient.addColorStop(.67,"hsl(241.2, 100%, 50%)"),gradient.addColorStop(.83,"hsl(298.8, 100%, 50%)"),gradient.addColorStop(1,"hsl(360, 100%, 50%)"),ctx.fillStyle=gradient,ctx.fillRect(0,0,t[0].width,t[0].height)}))},CPstartDragColor=function(e){var currentCPDraggedColor=$(this);e.preventDefault(),CPmoveDragColor(e,currentCPDraggedColor),$(window).on("mousemove",{colorCanvas:currentCPDraggedColor},CPmoveDragColor),$(window).on("mouseup",{colorCanvas:currentCPDraggedColor},CPstopDragColor)},CPclickColor=function(e){var currentCPDraggedColor=$(this);e.preventDefault(),CPmoveDragColor(e,currentCPDraggedColor)},CPtextColor=function(e){var hex=$(this).val().trim();e.preventDefault(),6===(hex="#"===hex.charAt(0)?hex.substr(1):hex).length&&CPsetColor($(this).closest(".color-picker-color-picker-ctn"),hex)},CPmoveDragColor=function(e,elem){var colorCanvas=elem||e.data.colorCanvas,rect=colorCanvas[0].getBoundingClientRect(),positionX=e.clientX-rect.left,positionY=e.clientY-rect.top,clampedX=CPclampValue(positionX,0,colorCanvas[0].width),clampedY=CPclampValue(positionY,0,colorCanvas[0].height);CPupdateColor(clampedX,clampedY,colorCanvas)},CPstopDragColor=function(data){$(window).off("mousemove",CPmoveDragColor),$(window).off("mouseup",CPstopDragColor)},CPupdateColor=function(x,y,colorCanvas){var hsvValue,hsvSaturation,ctn=colorCanvas.closest(".color-picker-color-picker-ctn"),currentColor=ctn.attr("data-current-color"),currentColorCtn=$(".color-picker-color-current",ctn),currentColorInput=$(".color-picker-color-input-text",ctn),colorCursor=$(".color-picker-color-cursor",ctn),light=(colorCanvas[0].getContext("2d"),(hsvValue=1-y/colorCanvas[0].height)/2*(2-(hsvSaturation=x/colorCanvas[0].width)));ctn.attr("data-light",light),ctn.attr("data-saturation",hsvValue*hsvSaturation/(1-Math.abs(2*light-1)));var newHex=CPhslToRgb(ctn);-1===newHex.indexOf("NaN")&&(currentColor=newHex,ctn.attr("data-current-color",newHex)),currentColorCtn.css("background",currentColor),currentColorCtn.html(currentColor),currentColorInput.length>0&&currentColorInput.val(currentColor),colorCursor.css("top",y+"px"),colorCursor.css("left",x+"px"),colorCursor.css("background",currentColor),colorCursor.attr("data-x",x),colorCursor.attr("data-y",y)},CPstartDragHue=function(e){var currentCPDraggedHue=$(this);e.preventDefault(),CPmoveDragHue(e,currentCPDraggedHue),$(window).on("mousemove",{hueCanvas:currentCPDraggedHue},CPmoveDragHue),$(window).on("mouseup",{hueCanvas:currentCPDraggedHue},CPstopDragHue)},CPclickHue=function(e){var currentCPDraggedHue=$(this);e.preventDefault(),CPmoveDragHue(e,currentCPDraggedHue)},CPmoveDragHue=function(e,elem){var hueCanvas=elem||e.data.hueCanvas,rect=hueCanvas[0].getBoundingClientRect(),positionY=e.clientY-rect.top,clampedY=CPclampValue(positionY,0,hueCanvas[0].height);CPupdateHue(clampedY,hueCanvas)},CPstopDragHue=function(e){$(window).off("mousemove",CPmoveDragHue),$(window).off("mouseup",CPstopDragHue)},CPupdateHue=function(y,hueCanvas){var ctn=hueCanvas.closest(".color-picker-color-picker-ctn"),colorCanvas=$(".color-picker-color-picker",ctn),hueCursor=$(".color-picker-hue-cursor",ctn),colorCursor=$(".color-picker-color-cursor",ctn),colorX=(hueCanvas[0].getContext("2d"),0|colorCursor.attr("data-x")),colorY=0|colorCursor.attr("data-y"),hue=y/hueCanvas[0].height*360;ctn.attr("data-hue",hue),ctn.attr("data-hue-color","hsl("+hue+", 100%, 50%)"),CPpaintColorCanvas(colorCanvas[0].getContext("2d"),colorCanvas),CPupdateColor(colorX,colorY,colorCanvas),hueCursor.css("top",y+"px"),hueCursor.css("background",ctn.attr("data-hue-color"))},CPcopyColor=function(e){var t=this,ctn=$(this).closest(".color-picker-color-picker-ctn"),currentColor=ctn.attr("data-current-color"),copySupported=document.queryCommandSupported("copy"),currentlyFocusedElement=document.activeElement;if(copySupported){var input=document.createElement("input");input.setAttribute("value",currentColor),t.appendChild(input),input.select(),document.execCommand("copy"),currentlyFocusedElement.focus(),t.removeChild(input),t.classList.add("copied"),CPupdateDataInput(currentColor,ctn),setTimeout((function(){t.classList.remove("copied")}),2e3)}},CPupdateDataInput=function(c,ctn){var current=$(".color-picker-color-current",ctn),parent=current.closest(".popup-outer-ctn"),inpName=current.attr("data-inp"),inp=$("input[name="+inpName+"]",parent);inp.attr("value",c),inp.css("background-color",c);for(var luminance_r=.2126,luminance_g=.7152,luminance_b=.0722,color=c,rgb=[parseInt(color.substring(1,3),16)/255,parseInt(color.substring(3,5),16)/255,parseInt(color.substring(5),16)/255],i=rgb.length;i--;)rgb[i]=rgb[i]<=.03928?rgb[i]/12.92:Math.pow((rgb[i]+.055)/1.055,2.4);luminance_r*rgb[0]+luminance_g*rgb[1]+luminance_b*rgb[2]>.22?(inp.css("color","black"),inp.css("border-color","black")):(inp.css("color","white"),inp.css("border-color","white"))};function fillRating(e,sel,half){var t=$(sel);t.parent().addClass("rated");var pos=t.attr("data-pos");if(t.prevAll().addClass("full"),"1"!==pos)""!==half?(t.addClass("half"),t.prevAll().removeClass("half")):t.addClass("full");else if("1"===pos){var w=$(sel).width();t.on("mousemove",(function(e){var m=getMouseOffset(sel,e);""===half&&m.x>w/4?t.addClass("full"):m.x<w/2?(t.prevAll().removeClass("half"),t.removeClass("half"),t.removeClass("full")):""!==half&&t.addClass("half")}))}else if("5"===pos){w=$(sel).width();t.on("mousemove",(function(e){getMouseOffset(sel,e).x>w/2&&(t.prevAll().removeClass("half"),t.removeClass("half"),t.addClass("full"))}))}t.prevAll().removeClass("half"),t.nextAll().removeClass("full"),t.nextAll().removeClass("half")}function stopHoverMousemove(){$(this).off("mousemove")}function stopHoverRating(e,sel,half){var t=$(sel);t.parent().addClass("rated"),t.parent().find(".r-star").removeAttr("onmouseenter"),t.parent().find(".r-star").unbind("mousemove"),t.prevAll().addClass("full");var w=$(sel).width(),m=getMouseOffset(sel,e);""!==half?(m.x<=w/4&&(t.prevAll().removeClass("half"),t.removeClass("half"),t.removeClass("full")),m.x>w/4&&m.x<2*w/3&&(t.removeClass("full"),t.prevAll().removeClass("half"),t.addClass("half")),m.x>2*w/3&&(t.removeClass("half"),t.addClass("full"))):(t.addClass("full"),m.x<w/3&&t.removeClass("full")),t.prevAll().removeClass("half"),t.nextAll().removeClass("full"),t.nextAll().removeClass("half")}function stoolPreviewOverlay(inp,sel,selectAll){var targ;sel&&""!==sel?(targ=$(sel),selectAll||(targ=targ.first())):targ=$(inp).parent().find(".stool-cover-overlay").first(),targ.css("opacity",inp.value)}function stoolUpdateOverlay(inp,callback){var key=inp.getAttribute("data-key"),langs=inp.getAttribute("data-langs");updateLabelLangs(key,inp.value,langs,callback,!0)}function stoolOpenLEW(e,el){openWindow("editSiteLink",!0);var form=document.getElementById("editSiteLinkForm"),fields=form.elements,data=getDataSet(el),btn=document.getElementById("editSiteLinkBtn"),lang=lang||document.documentElement.lang,allLangs=data.allLangs,langs=$("html").attr("data-all-langs")||$("html").attr("data-all-lang"),list=["type","href","target","text","query","event","custom"],successCd=list.length;-1!==lang.indexOf("-")&&(lang=lang.split("-")[0]),"false"===data.customActive?$(".custom-edit-link-toggle").css("display","none"):$(".custom-edit-link-toggle").css("display","block");for(var i=0;i<fields.length;i++){var inp=fields[i],name=inp.name;-1!==inp.className.indexOf("edit-link-tab")?inp.value===data[name]&&(inp.checked=!0,inp.onchange()):"radio"===inp.type||"checkbox"===inp.type?inp.value===data[name]?inp.checked=!0:inp.checked=!1:inp.value=data[name]?data[name]:""}function _complete(){if(--successCd<=0){var a=""===data.sel?el.nextElementSibling:document.querySelector(data.sel);a&&(a.href=""===data.type?"javascript:void(0);":("page"===data.type?data.tag:data.href)+("internal"!==data.type?data.query:""),a.children[0]||(a.innerHTML=data.text||a.getAttribute("data-text")),""===data.target?(a.removeAttribute("target"),a.removeAttribute("rel")):(a.target=data.target,a.rel="noopener nofollow"),a.onclick=""===data.event?null:function(e){e.preventDefault(),eval(data.event)})}}btn.onclick=function(){for(var i=0;i<fields.length;i++){var inp=fields[i],name=inp.name,val=inp.value;-1!==inp.className.indexOf("edit-link-tab")?inp.checked&&(data[name]=val,data.href=""!==val?fields.namedItem(val).value:"",el.setAttribute("data-"+name,val)):"radio"===inp.type||"checkbox"===inp.type?inp.checked?(data[name]=val,el.setAttribute("data-"+name,val)):(data[name]=!1,el.setAttribute("data-"+name,!1)):(data[name]=val,el.setAttribute("data-"+name,val),"page"===name&&inp.selectedIndex>-1&&(data.tag=inp.options[inp.selectedIndex].getAttribute("data-tag")))}for(var j=0;j<list.length;j++){var it=list[j];"true"==allLangs&&langs&&""!==langs?updateLabelLangs(data.key+"."+it,data[it],langs,_complete):updateLabel(data.key+"."+it,data[it],lang,_complete)}closeWindow("editSiteLink")}}function stoolToggleLinkInput(inp){var form=inp.form,selA=form.elements.namedItem("page").parentElement,selB=form.elements.namedItem("internal").parentElement,selC=form.elements.namedItem("external").parentElement;selA.style.display=selB.style.display=selC.style.display="none",inp.checked&&""!==inp.value&&(form.elements.namedItem(inp.value).parentElement.style.display="block")}function stoolOpenIconPicker(e,btn,callback){var el=btn.nextElementSibling,ico=el.children[0],cls=el.getAttribute("data-class"),sl=el.getAttribute("data-save-label"),siv=el.getAttribute("data-show-icon-value"),windowId=btn.getAttribute("data-window-id"),ipw=document.getElementById(windowId),sel=ipw.getElementsByClassName("stool-icopick-icon")[0],btnOk=ipw.getElementsByClassName("button-primary")[0];if(ico&&""!==cls&&(sel=ipw.getElementsByClassName(cls)[0]),$(ipw).hasClass("js-pre-select-value")){var icon=$(ipw).attr("data-icon");icon.length>0&&(sel=$(ipw).find('.stool-icopick-icon[data-name="'+icon+'"]')[0])}stoolSelectIcon(sel),btnOk.onclick=function _confirm(){var sel=ipw.querySelector(".stool-icopick-icon.selected"),newIco=sel.children[0],newCls="",content="",val="";newIco&&sel.hasAttribute("data-name")&&(val=sel.getAttribute("data-name"),newCls="stool-i"+val,content=newIco.outerHTML);el.setAttribute("data-class",newCls),el.innerHTML="false"===siv?content:val;"true"===sl&&updateLabelLangs(btn.getAttribute("data-key"),val,btn.getAttribute("data-langs"),callback,!0);closeWindow(windowId)},openWindow(windowId)}function stoolSelectIcon(sel){var kc="selected";if(!$(sel).hasClass(kc)){var other=sel.parentElement.querySelector("."+kc);other&&$(other).removeClass(kc),$(sel).addClass(kc)}}function socialPopupSubmitClick(){var ctn=$(this).closest(".picker-popup"),items=$(".social-popup-item",ctn),langs=ctn.attr("data-all-langs")||ctn.attr("data-all-lang"),siteList="";items.each((function(i){var k=$(this),input=$(".social-popup-input",k),id=input.attr("data-id"),hide=$(".social-popup-input-hide",k),hideId=hide.attr("name");""!==siteList&&(siteList+=","),siteList+=input.attr("data-accro"),updateLabelLangs(id,input.val(),langs),updateLabelLangs(hideId,String(hide.is(":checked")),langs)}));updateLabelLangs("social-list",siteList,langs,(function(){window.location.reload()}))}var fixHelper=function(e,ui){return ui.children().each((function(){$(this).width($(this).width())})),ui};function initSocialSortable(){0!==$(".social-popup-content .social-popup-draggable-handle").length&&$(".social-popup-content").sortable({handle:".social-popup-draggable-handle",items:".social-popup-item",helper:fixHelper})}function SToolComponentSettingsLinkSave(){var ctn=$(this).closest(".stool-component-settings-item"),fieldId=$(".stool-link-edit-window-content",ctn).attr("data-field-id"),message=$(".stool-component-settings-save-message",ctn),linkType=$(".edit-link-tab:checked",ctn).val(),linkHref="";"page"===linkType?linkHref=$('[name="page"]',ctn).val():"internal"===linkType?linkHref=$('[name="internal"]',ctn).val():"external"===linkType&&(linkHref=$('[name="external"]',ctn).val());var fields={type:linkType,href:linkHref,query:$('[name="query"]',ctn).val(),event:$('[name="event"]',ctn).val(),targ:$('[name="target"]',ctn).val(),text:$('[name="text"]',ctn).val()},count=0,total=Object.keys(fields).length;$.each(fields,(function(key,value){updateLabel(fieldId+"."+key,value,$("html").attr("lang"),(function(){++count===total&&(message.addClass("show"),setTimeout((function(){message.removeClass("show")}),2e3))}))}))}var openCustomLinks=function(){var id=$(this).attr("data-popup-id");openWindow(id,!0)},selectCustomLink=function(){var t=$(this),id=t.attr("data-id"),ctn=t.closest(".windowMainContainer").find(".admin-section-links-chosen-ctn");t.hasClass("selected")?(t.removeClass("selected"),ctn.find(".admin-custom-links-ctn[data-id = '"+id+"']").remove()):(t.addClass("selected"),createLink(ctn,id,t.attr("data-name"),t.attr("data-mainTag")))},createLink=function(ctn,id,text,href){var link=$("#link-admin-copy").children().clone("true");link.attr("data-id",id),link.find(".admin-custom-selected-links").attr("href",href),link.find(".admin-custom-selected-links").html(text),ctn.append(link)},addCustomLink=function(){var t=$(this),form=t.closest(".admin-page-name-external"),ctn=t.closest(".windowMainContainer").find(".admin-section-links-chosen-ctn"),name=form.find("input[name='customText']").val(),link=form.find("input[name='customLink']").val();""!==name.trim()&&""!==link.trim()&&(createLink(ctn,"",name,link),form.find("input[name='customText']").val(""),form.find("input[name='customLink']").val(""))},saveCustomLinks=function(){var currWindow=$(this).closest(".foxoneWindow"),ids="",key=$(this).attr("data-label"),windowId=$(this).attr("data-window-id"),lang=void 0!==$(this).attr("data-lang")&&""!==$(this).attr("data-lang")?$(this).attr("data-lang"):"fr";$(".chosen-custom-links .admin-custom-links-ctn",currWindow).each((function(){var id=$(this).attr("data-id");ids+=""!==id?$(this).attr("data-id")+",":$(this).find(".admin-custom-selected-links").attr("href")+"~!~"+$(this).find(".admin-custom-selected-links").html()+","})),ajax("/action/addSiteLabel?lang="+lang+"&key="+key+"&value="+encodeURIComponent(ids),(function(){closeWindow(windowId)}),!0)},initCustomLinksDraggable=function(){$(".admin-section-links-chosen-ctn").length>0&&$(".admin-section-links-chosen-ctn").sortable({connectWith:".admin-section-links-chosen-ctn",handle:".admin-dragger"}).disableSelection()},delCustomLink=function(){var t=$(this),ctn=t.closest(".admin-custom-links-ctn"),id=ctn.attr("data-id"),win=t.closest(".windowMainContainer");""!==id&&0!==win.find(".admin-page-name.selected[data-id = "+id+"]").length&&win.find(".admin-page-name.selected[data-id = "+id+"]").removeClass("selected"),ctn.remove()},stoolSharedPopupMouseDownTarget;function initChartCanvas(id){var ctx=$("#"+id);if(ctx[0]){var type=ctx.data("type"),chartBackgroundColor1=ctx.data("chart-background-color-1"),chartBackgroundColor2=ctx.data("chart-background-color-2"),displayLegend=ctx.data("display-legend"),fontSize=ctx.data("font-size"),legendUsePointStyle=ctx.data("legend-label-use-point-style"),legendFontColor=ctx.data("legend-label-font-color"),chartXAxisLabels=ctx.data("x-axis-labels").split(","),chartXDisplayGrid=ctx.data("x-display-gridlines"),chartXDisplayBorder=ctx.data("x-display-border"),chartYAxisLabel=ctx.data("y-axis-label"),chartYAxisUnits=ctx.data("y-axis-units"),chartYAxisUnitsInt=ctx.data("y-axis-units-int"),chartYDisplayGrid=ctx.data("y-display-gridlines"),chartYDisplayBorder=ctx.data("y-display-border"),chartYBeginAtZero=ctx.data("y-begin-zero"),chartYToFixedValue=ctx.data("y-tofixed-value"),tooltipBackgroundColor=ctx.data("tooltip-bg-color"),tooltipBodyFontColor=ctx.data("tooltip-body-font-color"),tooltipBodyFontFamily=ctx.data("tooltip-body-font-family"),tooltipBodyFontStyle=ctx.data("tooltip-body-font-style"),tooltipBodyFontSize=ctx.data("tooltip-body-font-size"),tooltipXPadding=ctx.data("tooltip-x-padding"),tooltipYPadding=ctx.data("tooltip-y-padding"),tooltipCaretSize=ctx.data("tooltip-caret-size"),tooltipDisplayColors=ctx.data("tooltip-display-colors"),tooltipDisplayTitle=ctx.data("tooltip-display-title"),stacked=ctx.data("stacked"),datasets=ctx.data("datasets").split("*"),datasetsArr=[];datasets.forEach((function(element){0!==element.length&&datasetsArr.push(JSON.parse(element))}));var data={labels:chartXAxisLabels,datasets:datasetsArr},graphtoolTooltipData={callbacks:{label:function(tooltipItems,data){var graphTooltiplabel="";return void 0!==data.datasets[tooltipItems.datasetIndex].label&&(graphTooltiplabel+=data.datasets[tooltipItems.datasetIndex].label+": "),void 0!==tooltipItems.yLabel&&(graphTooltiplabel+=tooltipItems.yLabel),void 0!==chartYAxisUnits&&(graphTooltiplabel+=" "+chartYAxisUnits),graphTooltiplabel}}};tooltipBackgroundColor&&(graphtoolTooltipData.backgroundColor=tooltipBackgroundColor),tooltipBodyFontColor&&(graphtoolTooltipData.bodyFontColor=tooltipBodyFontColor),tooltipBodyFontFamily&&(graphtoolTooltipData.bodyFontFamily=tooltipBodyFontFamily),tooltipBodyFontStyle&&(graphtoolTooltipData.bodyFontStyle=tooltipBodyFontStyle),tooltipBodyFontSize&&(graphtoolTooltipData.bodyFontSize=tooltipBodyFontSize),tooltipXPadding&&(graphtoolTooltipData.xPadding=tooltipXPadding),tooltipYPadding&&(graphtoolTooltipData.yPadding=tooltipYPadding),tooltipCaretSize&&(graphtoolTooltipData.caretSize=tooltipCaretSize),void 0===tooltipDisplayColors||tooltipDisplayColors||(graphtoolTooltipData.displayColors=tooltipDisplayColors),void 0===tooltipDisplayTitle||tooltipDisplayTitle||(graphtoolTooltipData.callbacks.title=function(){});var options={scales:{xAxes:[{stacked:stacked,gridLines:{display:chartXDisplayGrid,drawBorder:chartXDisplayBorder,offsetGridLines:"bar"===type}}],yAxes:[{stacked:stacked,scaleLabel:{display:!!chartYAxisLabel.length,labelString:chartYAxisLabel,fontSize:fontSize},gridLines:{display:chartYDisplayGrid,drawBorder:chartYDisplayBorder},ticks:{beginAtZero:!0===chartYBeginAtZero,callback:function(value,index,values){return chartYAxisUnits.trim().length?(!1===chartYAxisUnitsInt&&(value=parseFloat(value.toFixed(chartYToFixedValue||10))),value+" "+chartYAxisUnits):!0===chartYAxisUnitsInt?value%1==0?value:"":"number"!=typeof chartYToFixedValue?value:0!==chartYToFixedValue?value.toFixed("number"==typeof chartYToFixedValue?chartYToFixedValue:10):Math.floor(value)===value?value:void 0}}}]},legend:{display:displayLegend,onClick:function(){},labels:{usePointStyle:legendUsePointStyle,fontSize:fontSize,fontColor:legendFontColor}},chartArea:{backgroundColor1:chartBackgroundColor1,backgroundColor2:chartBackgroundColor2},tooltips:graphtoolTooltipData};new Chart(ctx,{type:type,data:data,options:options})}}var openPopup=function(p){var btn=$(this),popups=$(".stool-shared-popup"),id=btn.attr("data-id"),popup=popups.filter('[data-id="'+id+'"]'),visiblePopups=popups.filter(".visible"),removeScroll=!popup.hasClass("keep-scroll");if(visiblePopups.length)popup.addClass("no-anim"),visiblePopups.addClass("no-anim").removeClass("visible"),setTimeout((function(){visiblePopups.removeClass("no-anim")}),100);else if(removeScroll){var w1=$("body").width();$("body").addClass("no-scroll");var w2=$("body").width();$("body").css("padding-right",w2-w1+"px")}popup.addClass("visible"),popup.trigger("shared-popup-open",$(this))},closePopup=function(e){var popup,isSameTarget=stoolSharedPopupMouseDownTarget&&stoolSharedPopupMouseDownTarget.isEqualNode(e.target);isSameTarget&&$(e.target).hasClass("stool-shared-popup-outer")?popup=$(e.target):isSameTarget&&($(e.target).hasClass("stool-shared-popup-close-btn")||$(e.target).hasClass("stool-shared-popup-cancel-btn")||$(e.target).closest(".stool-shared-popup-cancel-btn").length>0)?popup=$(e.target).closest(".stool-shared-popup-outer"):$(e.target).hasClass("stool-shared-popup-close-btn")&&$(e.target).attr("data-id")&&(popup=$('.stool-shared-popup[data-id="'+$(e.target).attr("data-id")+'"]')),popup&&(!popup.hasClass("no-close")||$(e.target).hasClass("stool-shared-popup-cancel-btn")||$(e.target).closest(".stool-shared-popup-cancel-btn").length>0)&&(popup.hasClass("keep-scroll")||($("body").removeClass("no-scroll"),$("body").css("padding-right","0px")),popup.removeClass("no-anim").removeClass("visible"),popup.hasClass("stool-component-settings-popup")&&removeDarkenComponents(),popup.trigger("shared-popup-close"))},closePopupById=function(id){var popup=document.getElementById(id);closePopup({target:popup})},openPopupById=function(id){var div=$("<div />");div.attr("data-id",id),openPopup.apply(div)},sharedPopupMouseDown=function(e){stoolSharedPopupMouseDownTarget=e.target},darkenOtherComponents=function(){var id=$(this).attr("data-id");$(".componentContainerDiv").each((function(){$(this).attr("id")!=="componentDiv_"+id&&$(this).addClass("darken")}))},removeDarkenComponents=function(){$(".componentContainerDiv").removeClass("darken")},changeURLState=function(q,x,state,title){var qs="",url=window.location.pathname;return q&&"string"==typeof q?(""!==(qs=null==x?removeQuery(q):setQuery(q,x))&&(qs="?"+qs),url+=qs+window.location.hash,window.history.pushState(state,title||q+" "+x,url)):null},removeQuery=function(param,search){var se=void 0!==search?search:window.location.search;if(!param||""===param)return se.replace("?","");for(var qa=se.replace("?","").split("&"),qa2=[],i=0;i<qa.length;i++){var qi=qa[i],j=qi.indexOf("=");(j>-1?qi.substring(0,j):qi)!==param&&qa2.push(qi)}return qa2.join("&")},setQuery=function(param,value,search){var se=void 0!==search?search:window.location.search,v=encodeURIComponent(value);if(""!==se){for(var qa=se.replace("?","").split("&"),qa2=[],isNew=!0,i=0;i<qa.length;i++){var qi=qa[i],j=qi.indexOf("=");(j>-1?qi.substring(0,j):qi)===param&&(qi=v&&""!==v?param+"="+v:param,isNew=!1),qa2.push(qi)}return isNew&&qa2.push(param+"="+v),qa2.join("&")}return v&&""!==v?param+"="+v:param},updateTab=function(e){var tab=e.state?e.state.t:tabState.t,family=e.state?e.state.tf:tabState.tf;$('.stool-shared-tab[data-tab-family="'+family+'"]').removeClass("selected"),$('.stool-shared-tab[data-tab-family="'+family+'"][data-tab="'+tab+'"]').addClass("selected"),$('.stool-shared-tab-ctn[data-tab-family="'+family+'"]').removeClass("selected"),$('.stool-shared-tab-ctn[data-tab-family="'+family+'"][data-tab="'+tab+'"]').addClass("selected")},changeTab=function(){var t=$(this),tab=t.attr("data-tab"),family=t.attr("data-tab-family"),allClass=t.attr("data-all-class"),changeUrlWithParam="true"===t.attr("data-change-url-with-param");$('.stool-shared-tab[data-tab-family="'+family+'"]').removeClass("selected"),t.addClass("selected"),$('.stool-shared-tab-ctn[data-tab-family="'+family+'"]').removeClass("selected"),tab!=allClass?$('.stool-shared-tab-ctn[data-tab-family="'+family+'"][data-tab="'+tab+'"]').addClass("selected"):$('.stool-shared-tab-ctn[data-tab-family="'+family+'"]').addClass("selected"),changeUrlWithParam&&(tabState={t:tab,tf:family},changeURLState("t",tab,Object.assign({},tabState)))},compSettingsCheckboxUpdateLabel=function(){var t=$(this),label=t.attr("name"),val=t.is(":checked")?t.is(":checked"):"",langs=$("html").attr("data-all-langs")||$("html").attr("data-all-lang")||t.attr("data-all-langs");"radio"===t.attr("type")&&(val=t.attr("value")),updateLabelLangs(label,val,langs,(function(){}),!0)},compSettingsSelectUpdateLabel=function(){var t=$(this);updateLabelLangs(t.attr("name"),t.val(),$("html").attr("data-all-langs")||$("html").attr("data-all-lang"),(function(){}),!0)},compSettingsEditableLabelUpdate=function(){var ctn=$(this).closest(".stool-component-settings-item-label"),ta=$(".stool-component-settings-item-label-input",ctn),message=$(".stool-component-settings-item-label-message",ctn);updateLabelLangs(ta.attr("data-key"),ta.val(),$("html").attr("lang"),(function(){message.addClass("show"),setTimeout((function(){message.removeClass("show")}),2e3)}),!0)},compSettingsEditableMCEUpdate=function(){var ctn=$(this).closest(".stool-component-settings-item-label"),ta=$(".stool-component-settings-item-mce-input",ctn),message=$(".stool-component-settings-item-label-message",ctn),val=tinymce.get($(".stool-component-settings-item-mce-input",ctn).attr("id")).getContent();updateLabelLangs(ta.attr("data-key"),val,$("html").attr("lang"),(function(){message.addClass("show"),setTimeout((function(){message.removeClass("show")}),2e3)}),!0)},compSettingsEditableLabelMoreHeight=function(){var ctn=$(this).closest(".stool-component-settings-item-label"),ta=$(".stool-component-settings-item-label-input",ctn),lh=parseFloat(ta.css("line-height")),lessBtn=$(".stool-component-settings-item-label-input-less",ctn);ta.height(ta.height()+3*lh),lessBtn.prop("disabled",!1)},compSettingsEditableLabelLessHeight=function(){var t=$(this),ctn=t.closest(".stool-component-settings-item-label"),ta=$(".stool-component-settings-item-label-input",ctn),mh=parseFloat(ta.css("min-height")),lh=parseFloat(ta.css("line-height"));ta.height()-3*lh<=mh&&t.prop("disabled",!0),ta.height(ta.height()-3*lh)},SToolComponentSettingsPickerEdit=function(){var ctn=$(this).closest(".stool-component-settings-item-content");$(".stool-component-settings-icon-picker-content",ctn).slideToggle(300)},SToolComponentSettingsPickerSave=function(){var ctn=$(this).closest(".stool-component-settings-item-content"),selectedItem=$(".stool-icopick-icon.selected",ctn),message=$(".stool-component-settings-save-message",ctn),key=$(this).attr("data-id"),currIcon=$(".stool-component-settings-icon-picker-icon",ctn);if(0!==selectedItem.length){var selectedValue=selectedItem.attr("data-name"),currSvg=selectedItem.html(),langs=$("html").attr("data-all-langs")||$("html").attr("data-all-lang");currIcon.html(currSvg),updateLabelLangs(key,selectedValue,langs,(function(){message.addClass("show"),setTimeout((function(){message.removeClass("show")}),2e3)}),!0)}},SToolComponentSettingsDelOpen=function(){var popupId=$(this).closest(".stool-component-settings-popup").attr("data-id"),componentId=$('.stool-component-settings-btn[data-id="'+popupId+'"]').closest(".componentContainerDiv").attr("id"),ctn=$(this).closest(".stool-component-settings-component-controls").find(".stool-component-settings-component-controls-del-ctn");ctn.find('input[name="componentId"]').val(componentId.substring(componentId.indexOf("_")+1)),ctn.slideDown(200)},SToolComponentSettingsDelClose=function(){$(this).closest(".stool-component-settings-component-controls").find(".stool-component-settings-component-controls-del-ctn").slideUp(200)},moveGenlistceptionPopups=function(){$(".gen-list-popup").each((function(){$(this).closest(".gen-list-popup").length>0&&$(this).appendTo("body")}))};function cropImageEdit(id,async){async=null!=async&&async;var editor=document.getElementById(id);if(null!==editor){var ctrler=editor.querySelector(".imed-ctrl"),sizer=editor.querySelector(".imed-res"),img1=editor.querySelector(".iei1"),img2=editor.querySelector(".iei2"),scaler=editor.querySelector(".imed-sca"),moving=!1,uploadName=editor.querySelector(".file-upload-title"),uploadFile=editor.querySelector(".file-upload-input"),inputEditing=editor.querySelector(".imed-ie"),inputDeleting=null,oe={mouseX:0,mouseY:0,imgX:0,imgY:0,baseW:8,baseH:8,cropW:sizer.clientWidth,cropH:sizer.clientHeight,ratio:sizer.clientWidth/sizer.clientHeight,scaleratio:1,scaleby:"width",limit:{top:0,left:0,right:0,bottom:0,minWidth:8,maxWidth:4e3,minHeight:8,maxHeight:4e3,minScale:5,maxScale:180},mediaId:editor.querySelector(".imed-mi").value,curSrc:editor.querySelector(".imed-cur").src,defSrc:img1.src};function start(){img1.width>0&&img2.width>0&&oe.cropH>0&&oe.ratio&&(checkCropArea(),function initImage(){oe.baseW=Math.round(img1.naturalWidth*oe.scaleratio),oe.baseH=Math.round(img1.naturalHeight*oe.scaleratio),oe.baseW/oe.baseH>oe.ratio?(oe.scaleby="height",istyle("height",Math.max(oe.baseH,oe.cropH)+"px"),istyle("width","")):(oe.scaleby="width",istyle("width",Math.max(oe.baseW,oe.cropW)+"px"),istyle("height",""));setPositionLimit(),imove((oe.cropW-img1.width)/2,(oe.cropH-img1.height)/2),setPosition()}(),function setScaleLimit(){var data=$(scaler).data();parseInt(data.maxWidth)||(data.maxWidth=4e3);parseInt(data.maxHeight)||(data.maxHeight=4e3);data.minScale=100*Math.max(oe.cropW/oe.baseW,oe.cropH/oe.baseH,.05),data.minScale=data.minScale.toFixed(4),data.maxScale=Math.max(data.minScale,100)+80,scaler.setAttribute("max",data.maxScale),scaler.setAttribute("min",data.minScale),scaler.value=Math.max(data.minScale,100),Object.assign(oe.limit,data)}())}function checkCropArea(){var zoneW=editor.querySelector(".imed-zo1-inner").clientWidth;if(oe.cropW>zoneW){var area=editor.querySelector(".imed-pho");area.style.width=zoneW+"px",area.style.height=Math.round(zoneW/oe.ratio)+"px",oe.scaleratio=zoneW/oe.cropW,oe.cropW=zoneW,oe.cropH=area.clientHeight,scaler.setAttribute("data-min-width",oe.cropW),scaler.setAttribute("data-min-height",oe.cropH)}}function setPositionLimit(){oe.limit.right=oe.cropW-img1.width,oe.limit.bottom=oe.cropH-img1.height}function setPosition(){oe.imgX=img1.offsetLeft,oe.imgY=img1.offsetTop}function mdown(e){e.preventDefault(),e.stopPropagation(),moving=!0;var orEv=e.originalEvent||e;oe.mouseX=e.pageX||e.clientX||orEv.touches[0].clientX,oe.mouseY=e.pageY||e.clientY||orEv.touches[0].clientY}function mmove(e){if(e.preventDefault(),moving){var orEv=e.originalEvent||e,x=e.pageX||e.clientX||orEv.touches[0].clientX,y=e.pageY||e.clientY||orEv.touches[0].clientY;imove(oe.imgX+x-oe.mouseX,oe.imgY+y-oe.mouseY)}}function mup(e){e.preventDefault(),moving=!1,setPosition(),function iput(){editor.querySelector(".imed-ox").value=Math.round(-oe.imgX/oe.scaleratio),editor.querySelector(".imed-oy").value=Math.round(-oe.imgY/oe.scaleratio),editor.querySelector(".imed-sr").value=scaler.value/100}()}function imove(x,y){img1.width>=oe.cropW?istyle("left",within(x,oe.limit.right,oe.limit.left)+"px"):istyle("left",within(x,oe.limit.left,oe.limit.right)+"px"),img1.height>=oe.cropH?istyle("top",within(y,oe.limit.bottom,oe.limit.top)+"px"):istyle("top",within(y,oe.limit.top,oe.limit.bottom)+"px")}function iresize(e){var w=img1.width,h=img1.height,nw=within(Math.round(oe.baseW*(scaler.value/100)),oe.limit.minWidth,oe.limit.maxWidth),nh=within(Math.round(oe.baseH*(scaler.value/100)),oe.limit.minHeight,oe.limit.maxHeight);"width"===oe.scaleby?(istyle("width",nw+"px"),istyle("height","")):(istyle("width",""),istyle("height",nh+"px")),setPositionLimit(),imove(oe.imgX-(nw-w)/2,oe.imgY-(nh-h)/2),setPosition()}function istyle(prop,val){img1.style[prop]=img2.style[prop]=val}function within(value,min,max){return value<min?min:value>max?max:value}function checkSizer(){sizer.clientHeight>0&&oe.cropH<=0&&!oe.ratio?(oe.cropW=sizer.clientWidth,oe.cropH=sizer.clientHeight,oe.ratio=sizer.clientWidth/sizer.clientHeight,start()):setTimeout(checkSizer,1e3)}async?$(img1).on("load",start):start(),$(window).on("load",(function(){checkSizer(),iresize()})),$(window).resize(checkCropArea),ctrler.addEventListener("mousedown",mdown),ctrler.addEventListener("mousemove",mmove),ctrler.addEventListener("mouseup",mup),ctrler.addEventListener("mouseout",mup),ctrler.addEventListener("touchstart",mdown),ctrler.addEventListener("touchmove",mmove),ctrler.addEventListener("touchend",mup),ctrler.addEventListener("touchcancel",mup),scaler.addEventListener("input",iresize),scaler.addEventListener("change",mup),editor.querySelector(".imed-mod").addEventListener("click",(function edit(e){img1.src=img2.src=oe.defSrc,setTimeout((function(){!function toggleDelete(active){active?((inputDeleting=document.createElement("INPUT")).type="hidden",inputDeleting.name="delProfilePic",inputDeleting.value="true",editor.appendChild(inputDeleting),$(editor).addClass("removal")):(inputDeleting&&(editor.removeChild(inputDeleting),inputDeleting=null),$(editor).removeClass("removal"))}(!1),function toggleMedia(active){active?($(editor).removeClass("nosrc").removeClass("hascrop"),inputEditing.value="true"):($(editor).addClass("nosrc"),inputEditing.value="",$(uploadFile).val("").change(),$(uploadName).val("").removeClass("error"),""!==oe.mediaId&&parseInt(oe.mediaId)>0&&oe.curSrc.length>1&&($(editor).addClass("hascrop"),$(uploadName).parent().removeClass("error")))}(!0),start()}),100)}))}}function formatStringForUrlHandle(string){return string=(string=(string=(string=(string=(string=(string=(string=(string=(string=(string=(string=(string=string.trim()).toLowerCase()).replace(new RegExp("['`^¸:;.,¨!/$%?&*(){}\"]","g"),"")).replace(new RegExp(" ","g"),"-")).replace(new RegExp("(\\-)\\1+","g"),"-")).replace(new RegExp("[àâä]","g"),"a")).replace(new RegExp("[èêéë]","g"),"e")).replace(new RegExp("ç","g"),"c")).replace(new RegExp("[îï]","g"),"i")).replace(new RegExp("[òô]","g"),"o")).replace(new RegExp("û","g"),"u")).replace(new RegExp("œ","g"),"oe")).replace(new RegExp("æ","g"),"ae"),string=encodeURIComponent(string)}function textLabelWindow(id,ctn,key,absoluteURLs){var content=ctn.innerHTML;content===ctn.getAttribute("data-ignore")&&(content=""),document.getElementById(id+"_key").value=key,document.getElementById(id+"_value").value=content,absoluteURLs?$("#"+id).find("."+id+"-save").attr("data-absolute",!0):$("#"+id).find("."+id+"-save").removeAttr("data-absolute"),tinymce.get(id+"_value").load();var prevCtn=document.getElementById(id+"_src");prevCtn&&(prevCtn.id=""),ctn.id=id+"_src",openWindow(id)}function noFunc(url,node,on_save,name){}function submitTextLabel(id){var content=tinymce.get(id+"_value").getContent();if(void 0!==$("#"+id).find("."+id+"-save").attr("data-absolute")&&"true"===$("#"+id).find("."+id+"-save").attr("data-absolute")){var domain=$("#"+id).find("."+id+"-save").attr("data-domain")+"/";content=tinymce.get(id+"_value").getContent().replace(/ src="\//g,' src="'+domain).replace(/ href="(?!(https?|mailto|tel)\:)/gm,' href="'+domain)}updateLabel(document.getElementById(id+"_key").value,content,document.documentElement.lang,(function(resp){document.getElementById(id+"_src").innerHTML=decodeURIComponent(resp.trim().replace(/\+/g," "))})),closeWindow(id)}function submitTextLabel2(id){updateLabel(document.getElementById(id+"_key").value,tinymce.get(id+"_value").getContent(),document.documentElement.lang,(function(resp){document.getElementById(id+"_src").innerHTML=decodeURIComponent(resp.trim().replace(/\+/g," "))})),closeWindow(id)}function eraseTextLabel(id){updateLabel(document.getElementById(id+"_key").value,"",document.documentElement.lang,(function(resp){document.getElementById(id+"_src").innerHTML=decodeURIComponent(resp.trim().replace(/\+/g," "))})),closeWindow(id)}function l10n(fr,en,es){var ln=lang||document.documentElement.lang;return"fr"===ln?fr:"es"===ln?es:en}function toggleMG2Panel(sel,id,cancel){cancel?($(".mg2_panel_opened").slideUp(),$(".mg2_panel_toggled").removeClass("mg2_panel_toggled"),$(".mg2_panel_opened").removeClass("mg2_panel_opened")):$(sel).hasClass("mg2_panel_toggled")?($(sel).removeClass("mg2_panel_toggled"),$("#"+id).removeClass("mg2_panel_opened"),$("#"+id).slideUp()):($(".mg2_panel_opened").slideUp(),$(".mg2_panel_toggled").removeClass("mg2_panel_toggled"),$(".mg2_panel_opened").removeClass("mg2_panel_opened"),$(sel).addClass("mg2_panel_toggled"),$("#"+id).addClass("mg2_panel_opened"),$("#"+id).slideDown())}function cmsValidateAndSubmit(t){var form=$(t).closest("form");validateForm(form),form.hasClass("has-error")||($(t).closest(".cms-has-processing").addClass("is-processing"),form.submit())}$(document).ready((function(){if(moveGenlistceptionPopups(),$("body").on("click",".picker-popup-button",pickerOpenPopup),$("body").on("click",".file-preview-picker-tab-btn",pickerChangeTab),$("body").on("click",".file-preview-picker-popup-selection-del",pickerSelectionItemDel),initPickerSelectionItemsSortable(),initFilePickerPopop($(".file-preview-picker-popup-accept-btn")),$(".gen-list-popup").on("click",".gen-list-popup-item-header-toggle",genListToggleItem),$(".gen-list-popup").on("click",".gen-list-popup-admin-gencom-header-toggle",genListToggleGencom),$(".gen-list-popup").on("click",".js-gen-list-popup-add-item-btn",genListAddItem),$(".gen-list-popup").on("click",".gen-list-popup-item-del-btn",genListDelete),$(".gen-list-popup").on("click",".gen-list-item-checkbox-input",genListCheckboxInputClick),$(".gen-list-popup").on("change",".gen-com-select .gen-list-popup-item-select",genListItemGenComChange),$(".gen-list-popup").on("click",".gen-list-popup-submit-btn",genListSubmit),initGenListPopupItemsLimit(),initGenListPopupItemsSortable(),$(".gen-list-popup").on("change",".gen-list-popup-admin-item-type",genListPopupAdminUpdateExtra),$(".gen-list-popup").on("click",".gen-list-popup-admin-add-btn",genListPopupAdminAddItem),$(".gen-list-popup").on("click",".gen-list-popup-admin-save-btn",genListPopupAdminAddSaveList),$(".gen-list-popup").on("click",".gen-list-popup-admin-item-del-btn",genListPopupAdminDelItem),initGenListPopupAdminSortable(),$(".gen-list-popup").on("click",".gen-list-popup-admin-item-extra-select-add",genListAdminSelectAdd),$(".gen-list-popup").on("change",".gen-list-popup-admin-item-extra-select-select",genListSelectAdminSelectType),$(".gen-list-popup").on("click",".gen-list-popup-admin-item-extra-select-del",genListSaveAdminSelectDelItem),initGenListPopupAdminSelectSortable(),$(".gen-list-popup").on("change",".gen-list-popup-admin-item-extra-icon-select",genListPopupAdminIconSelectChange),$(".gen-list-popup").on("change",".gen-list-popup-item-select-country",genListSelectCountryChange),$(".gen-list-popup").on("blur",".gen-list-popup-admin-item-header-title",genListUpdateTitle),$(".gen-list-popup").on("keyup",".js-gen-list-popup-admin-gencom-change",genListGencomIdChange),$("body").on("click",".file-preview-picker-item:not(.folder)",filePreviewPickerItemClick),$(".file-preview-picker-popup-btn-ctn").on("click",".file-preview-picker-popup-accept-btn",filePreviewPickerSumbit),$(".file-preview-picker-input").keyup(filePreviewPickerSearch),$(".gen-list-search-input").keyup(genListSearch),CPclearCanvasListeners(),CPsetupHueCanvas(),CPsetupCanvasListeners(),CPsetColor(),genListFilterMultipleSelectOptions(),$(".gen-list-popup-item-select").each((function(){"true"===$(this).closest(".gen-list-popup-item-select-ctn").attr("data-multi")&&($(this).on("change",genListPopupItemSelectChange),$(".gen-list-popup-item-select-selected-item-del").click(genListPopupItemSelectDel))})),$('.gen-list-popup .gen-list-mce:not([id^="mce_"])').each((function(){genlistTinyMCE(this,$(this).closest(".gen-list-popup-item").attr("data-item-id"))})),$(".picker-popup-close-btn").each((function(){var t=$(this);0!==t.closest(".file-preview-picker-popup").length?t.click(filePreviewPickerClosePopup):t.click(pickerClosePopup)})),$(".file-preview-picker-item.folder").click(filePreviewPickerDirectoryOpen),$(".file-preview-picker-directory-back").click(filePreviewPickerDirectoryClose),$(".file-preview-picker-popup-upload-dadzone").on("dragover",(function(e){this.style.backgroundColor="#DDD",e.preventDefault()})),$(".file-preview-picker-popup-upload-dadzone").on("dragleave",(function(e){this.style.backgroundColor="",e.preventDefault()})),$(".file-preview-picker-popup-upload-dadzone").on("drop",filePreviewPickerHandleDrop),$(".file-preview-picker-popup-upload-dadzone").on("click",(function(){$(this).closest(".file-preview-picker-popup-upload").find(".file-preview-picker-popup-upload-form .bulk").trigger("click")})),$(".file-preview-picker-popup-upload-form .bulk").on("change",filePreviewPickerHandleDrop),$(".social-popup-submit-btn").click(socialPopupSubmitClick),initSocialSortable(),$(".anchor-setter-open-btn").add($(".anchor-setter-cancel-btn")).click((function(){var ctn=$(this).closest(".anchor-setter");ctn.hasClass("open")?ctn.removeClass("open"):ctn.addClass("open")})),$(".anchor-setter-save-btn").click((function(){var ctn=$(this).closest(".anchor-setter"),val=$('input[name="anchor"]').val();updateLabelLangs(ctn.attr("data-id"),val,ctn.attr("data-lang")),ctn.attr("data-saved-value",val)})),$(".anchor-setter-copy-btn").click((function(){var val=$(this).closest(".anchor-setter").attr("data-saved-value");window.prompt("Press Ctrl + C, then Enter to copy to clipboard",window.location.href+"#"+val)})),$(".graph-tool-canvas").each((function(){initChartCanvas($(this).attr("id"))})),$(".choose-custom-links").on("click",openCustomLinks),$(".admin-page-name").on("click",selectCustomLink),$(".add-custom-link").on("click",addCustomLink),$(".admin-custom-link-delete").on("click",delCustomLink),$(".save-custom-links").on("click",saveCustomLinks),$(".stool-shared-popup").length>0){$(".stool-shared-popup-btn");popups=$(".stool-shared-popup-outer"),$("body").on("click",".stool-shared-popup-btn",openPopup),$("body").on("click",".stool-shared-popup-close-btn",closePopup),popups.on("click",closePopup),popups.on("mousedown",sharedPopupMouseDown)}$(".stool-component-settings-link-save").click(SToolComponentSettingsLinkSave),$(".stool-component-settings-btn.stool-shared-popup-btn").click(darkenOtherComponents),$(".stool-component-settings-popup .stool-shared-popup-close-btn").click(removeDarkenComponents),$(".stool-shared-tab").click(changeTab),$(".stool-shared-tab")[0]&&window.addEventListener("popstate",(function(e){updateTab(e)})),$("body").on("change",".stool-component-settings-checkbox-input.update-label",compSettingsCheckboxUpdateLabel),$(".stool-component-settings-select.update-label").change(compSettingsSelectUpdateLabel),$(".stool-component-settings-item-label-save").click(compSettingsEditableLabelUpdate),$(".stool-component-settings-item-mce-save").click(compSettingsEditableMCEUpdate),$(".stool-component-settings-item-label-input-more").click(compSettingsEditableLabelMoreHeight),$(".stool-component-settings-item-label-input-less").click(compSettingsEditableLabelLessHeight),$(".stool-component-settings-icon-picker-edit-btn").click(SToolComponentSettingsPickerEdit),$(".stool-component-settings-icon-picker-save-btn").click(SToolComponentSettingsPickerSave),$(".stool-component-settings-component-controls-del-btn").click(SToolComponentSettingsDelOpen),$(".stool-component-settings-component-controls-del-cancel-btn").click(SToolComponentSettingsDelClose),initCustomLinksDraggable()}));
//# sourceMappingURL=../maps/tools.min.js.map
